{"ast":null,"code":"var _jsxFileName = \"/Users/faybennett/outlierTasks/game-app/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\n\n// Types\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Constants\nconst SAVE_KEY = \"apocalypse-idle-save\";\nconst AUTO_SAVE_INTERVAL = 10000; // 10 seconds\nconst DISASTER_CHANCE = 0.002; // 0.2% chance per second\n\nconst initialResources = {\n  food: 100,\n  water: 100,\n  materials: 50,\n  survivors: 5\n};\nconst disasters = [{\n  id: \"raiders\",\n  name: \"Raider Attack!\",\n  description: \"Raiders have attacked your base!\",\n  effect: {\n    food: -20,\n    water: -15,\n    materials: -10\n  }\n}, {\n  id: \"drought\",\n  name: \"Drought\",\n  description: \"Water supplies are running low!\",\n  effect: {\n    water: -30\n  }\n}, {\n  id: \"sickness\",\n  name: \"Disease Outbreak\",\n  description: \"A disease has spread through your camp!\",\n  effect: {\n    survivors: -1,\n    food: -10\n  }\n}];\nconst ApocalypticGame = () => {\n  _s();\n  // State\n  const [resources, setResources] = useState(initialResources);\n  const [activeTab, setActiveTab] = useState(\"resources\");\n  const [isMobile, setIsMobile] = useState(false);\n  const [showRadialMenu, setShowRadialMenu] = useState(false);\n  const [radialMenuPosition, setRadialMenuPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  const [showDisaster, setShowDisaster] = useState(null);\n  const [autoScavengeEnabled, setAutoScavengeEnabled] = useState(true);\n  const [scavengeResult, setScavengeResult] = useState(null);\n  const [waitingForScavengePopup, setWaitingForScavengePopup] = useState(false);\n  const gameLoopRef = useRef(null);\n  const autoSaveRef = useRef(null);\n  const [upgrades, setUpgrades] = useState([{\n    id: \"farm\",\n    name: \"Makeshift Farm\",\n    description: \"Produces food over time\",\n    cost: {\n      materials: 50\n    },\n    effect: \"+2 food/minute\",\n    level: 0,\n    maxLevel: 5\n  }, {\n    id: \"well\",\n    name: \"Water Collector\",\n    description: \"Collects water from the atmosphere\",\n    cost: {\n      materials: 40\n    },\n    effect: \"+1 water/minute\",\n    level: 0,\n    maxLevel: 5\n  }, {\n    id: \"shelter\",\n    name: \"Survivor Shelter\",\n    description: \"Attracts new survivors\",\n    cost: {\n      materials: 100,\n      food: 50\n    },\n    effect: \"+1 survivor chance/hour\",\n    level: 0,\n    maxLevel: 3\n  }]);\n  const GRID_SIZE = 5;\n  const locationNames = [\"Dustfield\", \"Ashrock\", \"Ironpit\", \"Deadwell\", \"Cragpoint\", \"Burnpass\", \"Mudspire\", \"Wretchend\", \"Redhollow\", \"Saltmoor\", \"Scraptown\", \"Charcliff\", \"Dryreach\", \"Ragbank\", \"Blightden\", \"Boneplain\", \"Rustbarrow\", \"Smokefall\", \"Shivglen\", \"Flintgorge\", \"Gravefen\", \"Scorchbay\", \"Fogscar\", \"Ruinstep\", \"Crimsonlot\"];\n  const generateInitialGrid = () => {\n    const locations = [];\n    for (let y = 0; y < GRID_SIZE; y++) {\n      for (let x = 0; x < GRID_SIZE; x++) {\n        const isBase = x === Math.floor(GRID_SIZE / 2) && y === Math.floor(GRID_SIZE / 2);\n        locations.push({\n          id: `cell-${x}-${y}`,\n          name: isBase ? \"Your Base\" : locationNames[y * GRID_SIZE + x] || `Sector-${x}-${y}`,\n          isBase: isBase,\n          x,\n          y,\n          discovered: isBase,\n          scavengeTime: isBase ? 0 : 5000 + Math.floor(Math.random() * 5000),\n          lastScavenged: null,\n          resources: isBase ? {} : Math.random() < 0.6 // change of having resoureces on newly discovered locations\n          ? {\n            food: Math.floor(Math.random() * 30),\n            water: Math.floor(Math.random() * 20),\n            materials: Math.random() < 0.5 ? Math.floor(Math.random() * 40) : 0,\n            survivors: Math.random() < 0.2 ? 1 : 0\n          } : {}\n        });\n      }\n    }\n    return locations;\n  };\n  const [locations, setLocations] = useState(generateInitialGrid());\n  const resourcesRef = useRef(resources);\n  const upgradesRef = useRef(upgrades);\n\n  // Update refs whenever state changes\n  useEffect(() => {\n    resourcesRef.current = resources;\n  }, [resources]);\n  useEffect(() => {\n    upgradesRef.current = upgrades;\n  }, [upgrades]);\n\n  // Responsive design\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n    return () => window.removeEventListener(\"resize\", checkMobile);\n  }, []);\n\n  // Load game\n  useEffect(() => {\n    const savedGame = localStorage.getItem(SAVE_KEY);\n    if (savedGame) {\n      try {\n        const gameState = JSON.parse(savedGame);\n        const timePassed = Date.now() - gameState.lastSave;\n\n        // Calculate offline progression\n        const minutesPassed = timePassed / 60000;\n        const offlineResources = {\n          ...gameState.resources\n        };\n        gameState.upgrades.forEach(upgrade => {\n          if (upgrade.id === \"farm\" && upgrade.level > 0) {\n            offlineResources.food += Math.floor(minutesPassed * 2 * upgrade.level * 0.5); // 50% efficiency offline\n          }\n          if (upgrade.id === \"well\" && upgrade.level > 0) {\n            offlineResources.water += Math.floor(minutesPassed * 1 * upgrade.level * 0.5);\n          }\n          if (upgrade.id === \"shelter\" && upgrade.level > 0) {\n            offlineResources.survivors += Math.floor(minutesPassed * (1 / 60) * upgrade.level * 0.5);\n          }\n        });\n        setResources(offlineResources);\n        setUpgrades(gameState.upgrades);\n        setLocations(gameState.locations);\n        setAutoScavengeEnabled(gameState.autoScavengeEnabled);\n      } catch (e) {\n        console.error(\"Failed to load save:\", e);\n      }\n    }\n  }, []);\n\n  // Save game\n  const saveGame = useCallback(() => {\n    const gameState = {\n      resources,\n      upgrades,\n      locations,\n      lastSave: Date.now(),\n      autoScavengeEnabled\n    };\n    localStorage.setItem(SAVE_KEY, JSON.stringify(gameState));\n  }, [resources, upgrades, locations, autoScavengeEnabled]);\n\n  // Auto save\n  useEffect(() => {\n    autoSaveRef.current = setInterval(saveGame, AUTO_SAVE_INTERVAL);\n    return () => {\n      if (autoSaveRef.current) clearInterval(autoSaveRef.current);\n    };\n  }, [saveGame]);\n  function floorResources(res) {\n    return {\n      food: Math.floor(res.food),\n      water: Math.floor(res.water),\n      materials: Math.floor(res.materials),\n      survivors: Math.floor(res.survivors)\n    };\n  }\n  function isEqualResources(a, b) {\n    return a.food === b.food && a.water === b.water && a.materials === b.materials && a.survivors === b.survivors;\n  }\n\n  // Game loop\n  useEffect(() => {\n    gameLoopRef.current = setInterval(() => {\n      setResources(prev => {\n        const newResources = {\n          ...prev\n        };\n\n        // Apply upgrade effects\n        upgrades.forEach(upgrade => {\n          if (upgrade.id === \"farm\" && upgrade.level > 0) {\n            newResources.food += 2 * upgrade.level / 60; // per second\n          }\n          if (upgrade.id === \"well\" && upgrade.level > 0) {\n            newResources.water += 1 * upgrade.level / 60;\n          }\n          if (upgrade.id === \"shelter\" && upgrade.level > 0) {\n            newResources.survivors += 1 * upgrade.level / 3600; // 1 per hour\n          }\n        });\n\n        // Survivor consumption\n        newResources.food = Math.max(0, newResources.food - prev.survivors * 0.01);\n        newResources.water = Math.max(0, newResources.water - prev.survivors * 0.02);\n\n        // Floor and compare\n        const floored = floorResources(newResources);\n        if (!isEqualResources(floored, floorResources(prev))) {\n          return floored;\n        }\n        return prev; // Skip update if unchanged\n      });\n\n      // Check for disasters\n      if (Math.random() < DISASTER_CHANCE) {\n        const disaster = disasters[Math.floor(Math.random() * disasters.length)];\n        setShowDisaster(disaster);\n        applyDisaster(disaster);\n      }\n\n      // Auto scavenging\n      if (autoScavengeEnabled) {\n        checkAutoScavenge();\n      }\n    }, 2000);\n    return () => {\n      if (gameLoopRef.current) clearInterval(gameLoopRef.current);\n    };\n  }, [upgrades, autoScavengeEnabled]);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = Date.now();\n      if (waitingForScavengePopup || scavengeResult) return;\n      const finished = locations.find(loc => loc.lastScavenged && loc.scavengeTime > 0 && now - loc.lastScavenged >= loc.scavengeTime);\n      if (finished) finalizeScavenge(finished);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [locations, waitingForScavengePopup, scavengeResult]);\n  const applyDisaster = disaster => {\n    setResources(prev => ({\n      food: Math.max(0, prev.food + (disaster.effect.food || 0)),\n      water: Math.max(0, prev.water + (disaster.effect.water || 0)),\n      materials: Math.max(0, prev.materials + (disaster.effect.materials || 0)),\n      survivors: Math.max(1, prev.survivors + (disaster.effect.survivors || 0))\n    }));\n  };\n  const checkAutoScavenge = () => {\n    if (waitingForScavengePopup) return;\n    const now = Date.now();\n    setLocations(prev => {\n      let hasActiveScavenge = false;\n      let updated = false;\n      const newLocations = prev.map(loc => {\n        if (loc.lastScavenged && loc.scavengeTime > 0) {\n          if (now - loc.lastScavenged >= loc.scavengeTime && !updated) {\n            const loot = {\n              food: loc.resources.food || 0,\n              water: loc.resources.water || 0,\n              materials: loc.resources.materials || 0,\n              survivors: loc.resources.survivors || 0\n            };\n            finalizeScavenge(loc);\n            updated = true;\n            return loc;\n          }\n          hasActiveScavenge = true;\n          return loc;\n        }\n        return loc;\n      });\n      if (!hasActiveScavenge && !updated) {\n        // Start auto-scavenge on the first available location\n        const targetIndex = newLocations.findIndex(loc => loc.discovered && !loc.lastScavenged && loc.scavengeTime > 0 && Object.values(loc.resources).some(v => v && v > 0));\n        if (targetIndex !== -1) {\n          newLocations[targetIndex] = {\n            ...newLocations[targetIndex],\n            lastScavenged: now\n          };\n          updated = true;\n        }\n      }\n      return newLocations;\n    });\n  };\n  const finalizeScavenge = location => {\n    const loot = {\n      food: location.resources.food || 0,\n      water: location.resources.water || 0,\n      materials: location.resources.materials || 0,\n      survivors: location.resources.survivors || 0\n    };\n    setScavengeResult(loot);\n    setResources(prevResources => ({\n      food: prevResources.food + loot.food,\n      water: prevResources.water + loot.water,\n      materials: prevResources.materials + loot.materials,\n      survivors: prevResources.survivors + loot.survivors\n    }));\n    setWaitingForScavengePopup(true);\n    setLocations(prev => prev.map(loc => loc.id === location.id ? {\n      ...loc,\n      lastScavenged: null,\n      resources: {},\n      wasScavenged: true\n    } : loc));\n  };\n  const handleMapClick = (e, location) => {\n    e.stopPropagation();\n    if (!location.discovered && location.id !== \"base\") return;\n    setSelectedLocation(location);\n    setRadialMenuPosition({\n      x: e.clientX,\n      y: e.clientY\n    });\n    setShowRadialMenu(true);\n  };\n  const scavengeLocation = location => {\n    if (location.lastScavenged || location.scavengeTime === 0) return;\n    setLocations(prev => prev.map(loc => loc.id === location.id ? {\n      ...loc,\n      lastScavenged: Date.now()\n    } : loc));\n    setShowRadialMenu(false);\n  };\n  const exploreNearby = () => {\n    if (!selectedLocation) return;\n    const getGridCoords = id => {\n      const match = id.match(/cell-(\\d+)-(\\d+)/);\n      if (!match) return null;\n      return {\n        x: parseInt(match[1]),\n        y: parseInt(match[2])\n      };\n    };\n    const selectedCoords = getGridCoords(selectedLocation.id);\n    if (!selectedCoords) return;\n    setLocations(prev => prev.map(loc => {\n      const coords = getGridCoords(loc.id);\n      if (!coords || loc.discovered) return loc;\n      const dx = Math.abs(coords.x - selectedCoords.x);\n      const dy = Math.abs(coords.y - selectedCoords.y);\n      if (dx <= 1 && dy <= 1) {\n        return {\n          ...loc,\n          discovered: true\n        };\n      }\n      return loc;\n    }));\n    setShowRadialMenu(false);\n  };\n  const purchaseUpgrade = upgrade => {\n    if (upgrade.level >= upgrade.maxLevel) return;\n    const canAfford = Object.entries(upgrade.cost).every(([resource, cost]) => resources[resource] >= (cost || 0));\n    if (canAfford) {\n      setResources(prev => {\n        const newResources = {\n          ...prev\n        };\n        Object.entries(upgrade.cost).forEach(([resource, cost]) => {\n          newResources[resource] -= cost || 0;\n        });\n        return newResources;\n      });\n      setUpgrades(prev => prev.map(u => u.id === upgrade.id ? {\n        ...u,\n        level: u.level + 1,\n        cost: Object.fromEntries(Object.entries(u.cost).map(([r, c]) => [r, Math.floor((c || 0) * 1.5)]))\n      } : u));\n    }\n  };\n  const getScavengeProgress = location => {\n    if (!location.lastScavenged || location.scavengeTime === 0) return 0;\n    const elapsed = Date.now() - location.lastScavenged;\n    return Math.min(100, elapsed / location.scavengeTime * 100);\n  };\n\n  // Components\n  const ResourcePanel = /*#__PURE__*/React.memo(({\n    resources,\n    upgrades,\n    autoScavengeEnabled,\n    purchaseUpgrade,\n    setAutoScavengeEnabled\n  }) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 rounded-lg p-6 shadow-lg h-[calc(100%-60px)] flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-100 mb-6\",\n          children: \"Resources\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-4 mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-700 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-300\",\n                children: \"\\uD83C\\uDF56 Food\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xl font-semibold text-green-400\",\n                children: Math.floor(resources.food)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-700 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-300\",\n                children: \"\\uD83D\\uDCA7 Water\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xl font-semibold text-blue-400\",\n                children: Math.floor(resources.water)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-700 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-300\",\n                children: \"\\uD83D\\uDD27 Materials\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xl font-semibold text-orange-400\",\n                children: Math.floor(resources.materials)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-700 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-300\",\n                children: \"\\uD83D\\uDC65 Survivors\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xl font-semibold text-purple-400\",\n                children: resources.survivors\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-100 mb-4\",\n          children: \"Base Upgrades\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-grow overflow-y-auto md:pr-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: upgrades.map(upgrade => {\n            const canAfford = Object.entries(upgrade.cost).every(([resource, cost]) => resources[resource] >= (cost || 0));\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-700 rounded-lg p-3 shadow-md flex gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mb-2 flex-grow border-r border-gray-600 md:pr-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"text-sm font-semibold text-gray-100\",\n                      children: upgrade.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 636,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-green-400 mt-1\",\n                      children: upgrade.effect\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 639,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 635,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-400\",\n                    children: upgrade.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 643,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 634,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-300\",\n                    children: [\"Level \", upgrade.level, \"/\", upgrade.maxLevel]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 647,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 21\n              }, this), upgrade.level < upgrade.maxLevel && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => purchaseUpgrade(upgrade),\n                disabled: !canAfford,\n                className: `ml-auto mr-0 w-full max-w-20 sm:max-w-40 px-4 py-2 rounded-md transition-colors text-xs md:text-sm leading-4 ${canAfford ? \"bg-green-600 hover:bg-green-700 text-white\" : \"bg-gray-600 text-gray-400 cursor-not-allowed\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Upgrade\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 663,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"(\", Object.entries(upgrade.cost).map(([r, c]) => `${c} ${r}`).join(\", \"), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 664,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 23\n              }, this)]\n            }, upgrade.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none mt-4 pt-4 border-t border-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center space-x-2 text-gray-300\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: autoScavengeEnabled,\n            onChange: e => setAutoScavengeEnabled(e.target.checked),\n            className: \"rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Auto-scavenge locations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 578,\n      columnNumber: 9\n    }, this);\n  });\n  const ScavengePopup = () => {\n    if (!scavengeResult) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 rounded-lg p-6 max-w-sm shadow-2xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-green-400 mb-2\",\n          children: \"Resources Found!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"text-gray-200 space-y-1 mb-4\",\n          children: Object.entries(scavengeResult).map(([key, value]) => value > 0 ? /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [key, \":\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-white\",\n              children: value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 19\n            }, this)]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 707,\n            columnNumber: 17\n          }, this) : null)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setScavengeResult(null);\n            setWaitingForScavengePopup(false); // Enables next scavenge\n          },\n          className: \"w-full bg-green-700 hover:bg-green-800 text-white py-2 px-4 rounded transition-colors\",\n          children: \"Continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 699,\n      columnNumber: 7\n    }, this);\n  };\n  const MapView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-800 rounded-lg p-2 sm:p-6 shadow-lg h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-gray-100 mb-6\",\n      children: \"Wasteland Map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 730,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid bg-gray-900 rounded-lg aspect-square shadow-inner\",\n      style: {\n        gridTemplateColumns: `repeat(${GRID_SIZE}, 1fr)`,\n        gridTemplateRows: `repeat(${GRID_SIZE}, 1fr)`\n      },\n      onClick: () => setShowRadialMenu(false),\n      children: locations.map(location => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-center justify-center ${location.discovered ? \"cursor-pointer\" : \"opacity-50\"}`,\n          onClick: e => handleMapClick(e, location),\n          children: location.discovered ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative group\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-16 h-16 rounded-sm flex items-center justify-center text-2xl shadow-lg transform transition-transform group-hover:scale-110 ${location.id === \"base\" ? \"bg-green-600\" : \"bg-blue-600\"}`,\n              children: location.isBase ? \"ðŸ \" : location.wasScavenged ? \"âœ…\" : location.resources && Object.values(location.resources).some(val => val && val > 0) ? \"ðŸ’°\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute -bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-300\",\n                children: location.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 767,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 19\n            }, this), location.lastScavenged && location.scavengeTime > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-1 left-2 right-2 h-1 bg-gray-700 rounded\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-full bg-green-500 rounded transition-all duration-1000\",\n                style: {\n                  width: `${getScavengeProgress(location)}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 771,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-16 h-16 rounded-sm bg-gray-700 flex items-center justify-center text-2xl opacity-35 animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 779,\n            columnNumber: 17\n          }, this)\n        }, location.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 729,\n    columnNumber: 5\n  }, this);\n  const RadialMenu = () => {\n    if (!showRadialMenu || !selectedLocation) return null;\n    const actions = [{\n      label: \"Scavenge\",\n      icon: \"ðŸ”\",\n      enabled: !selectedLocation.lastScavenged && selectedLocation.scavengeTime > 0 && Object.values(selectedLocation.resources).some(val => val && val > 0),\n      action: () => scavengeLocation(selectedLocation)\n    }, {\n      label: \"Explore\",\n      icon: \"ðŸ—ºï¸\",\n      enabled: true,\n      action: exploreNearby\n    }, {\n      label: \"Cancel\",\n      icon: \"âŒ\",\n      enabled: true,\n      action: () => setShowRadialMenu(false)\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50\",\n      onClick: () => setShowRadialMenu(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute\",\n        style: {\n          left: radialMenuPosition.x,\n          top: radialMenuPosition.y\n        },\n        children: actions.map((action, index) => {\n          const angle = (index * 120 - 60) * (Math.PI / 180);\n          const x = Math.cos(angle) * 80;\n          const y = Math.sin(angle) * 80;\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !action.enabled,\n            onClick: e => {\n              e.stopPropagation();\n              action.action();\n            },\n            className: `absolute transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full flex flex-col items-center justify-center text-white transition-all ${action.enabled ? \"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl\" : \"bg-gray-600 cursor-not-allowed opacity-50\"}`,\n            style: {\n              left: x,\n              top: y\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xl\",\n              children: action.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs mt-1\",\n              children: action.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 847,\n              columnNumber: 17\n            }, this)]\n          }, action.label, true, {\n            fileName: _jsxFileName,\n            lineNumber: 832,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 822,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 818,\n      columnNumber: 7\n    }, this);\n  };\n  const DisasterPopup = () => {\n    if (!showDisaster) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-900 rounded-lg p-6 max-w-sm shadow-2xl animate-pulse\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-2xl font-bold text-white mb-2\",\n          children: showDisaster.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 862,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-200 mb-4\",\n          children: showDisaster.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 865,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-300 mb-4\",\n          children: Object.entries(showDisaster.effect).map(([resource, amount]) => /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [resource, \": \", amount]\n          }, resource, true, {\n            fileName: _jsxFileName,\n            lineNumber: 868,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 866,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowDisaster(null),\n          className: \"w-full bg-red-700 hover:bg-red-800 text-white py-2 px-4 rounded transition-colors\",\n          children: \"Continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 873,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 861,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 860,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white\",\n    children: [isMobile ?\n    /*#__PURE__*/\n    // Mobile layout with tabs\n    _jsxDEV(\"div\", {\n      className: \"px-2 py-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-center mb-6\",\n        children: \"Wasteland Survivor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 889,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex mb-4 bg-gray-800 rounded-lg p-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"resources\"),\n          className: `flex-1 py-2 px-4 rounded-md transition-colors ${activeTab === \"resources\" ? \"bg-gray-700 text-white\" : \"text-gray-400 hover:text-white\"}`,\n          children: \"Resources\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 893,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"map\"),\n          className: `flex-1 py-2 px-4 rounded-md transition-colors ${activeTab === \"map\" ? \"bg-gray-700 text-white\" : \"text-gray-400 hover:text-white\"}`,\n          children: \"Map\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 903,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 892,\n        columnNumber: 11\n      }, this), activeTab === \"resources\" ? /*#__PURE__*/_jsxDEV(ResourcePanel, {\n        resources: resources,\n        upgrades: upgrades,\n        autoScavengeEnabled: autoScavengeEnabled,\n        purchaseUpgrade: purchaseUpgrade,\n        setAutoScavengeEnabled: setAutoScavengeEnabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 915,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(MapView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 923,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 888,\n      columnNumber: 9\n    }, this) :\n    /*#__PURE__*/\n    // Desktop split-screen layout\n    _jsxDEV(\"div\", {\n      className: \"flex h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/2 p-6 overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold mb-6\",\n          children: \"Wasteland Survivor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 930,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ResourcePanel, {\n          resources: resources,\n          upgrades: upgrades,\n          autoScavengeEnabled: autoScavengeEnabled,\n          purchaseUpgrade: purchaseUpgrade,\n          setAutoScavengeEnabled: setAutoScavengeEnabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 931,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 929,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/2 p-6 border-l border-gray-700 flex flex-col h-full\",\n        children: /*#__PURE__*/_jsxDEV(MapView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 940,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 939,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 928,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(RadialMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 945,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DisasterPopup, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 946,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ScavengePopup, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 947,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 885,\n    columnNumber: 5\n  }, this);\n};\n_s(ApocalypticGame, \"QxV/Rfymhmi1Q9ZT2RZShxLM1Og=\");\n_c = ApocalypticGame;\nexport default ApocalypticGame;\nvar _c;\n$RefreshReg$(_c, \"ApocalypticGame\");","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","jsxDEV","_jsxDEV","SAVE_KEY","AUTO_SAVE_INTERVAL","DISASTER_CHANCE","initialResources","food","water","materials","survivors","disasters","id","name","description","effect","ApocalypticGame","_s","resources","setResources","activeTab","setActiveTab","isMobile","setIsMobile","showRadialMenu","setShowRadialMenu","radialMenuPosition","setRadialMenuPosition","x","y","selectedLocation","setSelectedLocation","showDisaster","setShowDisaster","autoScavengeEnabled","setAutoScavengeEnabled","scavengeResult","setScavengeResult","waitingForScavengePopup","setWaitingForScavengePopup","gameLoopRef","autoSaveRef","upgrades","setUpgrades","cost","level","maxLevel","GRID_SIZE","locationNames","generateInitialGrid","locations","isBase","Math","floor","push","discovered","scavengeTime","random","lastScavenged","setLocations","resourcesRef","upgradesRef","current","checkMobile","window","innerWidth","addEventListener","removeEventListener","savedGame","localStorage","getItem","gameState","JSON","parse","timePassed","Date","now","lastSave","minutesPassed","offlineResources","forEach","upgrade","e","console","error","saveGame","setItem","stringify","setInterval","clearInterval","floorResources","res","isEqualResources","a","b","prev","newResources","max","floored","disaster","length","applyDisaster","checkAutoScavenge","interval","finished","find","loc","finalizeScavenge","hasActiveScavenge","updated","newLocations","map","loot","targetIndex","findIndex","Object","values","some","v","location","prevResources","wasScavenged","handleMapClick","stopPropagation","clientX","clientY","scavengeLocation","exploreNearby","getGridCoords","match","parseInt","selectedCoords","coords","dx","abs","dy","purchaseUpgrade","canAfford","entries","every","resource","u","fromEntries","r","c","getScavengeProgress","elapsed","min","ResourcePanel","memo","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","join","type","checked","onChange","target","ScavengePopup","key","value","MapView","style","gridTemplateColumns","gridTemplateRows","val","width","RadialMenu","actions","label","icon","enabled","action","left","top","index","angle","PI","cos","sin","DisasterPopup","amount","_c","$RefreshReg$"],"sources":["/Users/faybennett/outlierTasks/game-app/src/App.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\n\n// Types\ninterface Resources {\n  food: number;\n  water: number;\n  materials: number;\n  survivors: number;\n}\n\ninterface BaseUpgrade {\n  id: string;\n  name: string;\n  description: string;\n  cost: Partial<Resources>;\n  effect: string;\n  level: number;\n  maxLevel: number;\n}\n\ninterface MapLocation {\n  id: string;\n  name: string;\n  x: number;\n  y: number;\n  discovered: boolean;\n  scavengeTime: number;\n  lastScavenged: number | null;\n  resources: Partial<Resources>;\n  isBase?: boolean; // Optional property to mark the base location\n  wasScavenged?: boolean; // Optional property to track if the location was already scavenged\n}\n\ninterface Disaster {\n  id: string;\n  name: string;\n  description: string;\n  effect: Partial<Resources>;\n}\n\ninterface GameState {\n  resources: Resources;\n  upgrades: BaseUpgrade[];\n  locations: MapLocation[];\n  lastSave: number;\n  autoScavengeEnabled: boolean;\n}\n\n// Constants\nconst SAVE_KEY = \"apocalypse-idle-save\";\nconst AUTO_SAVE_INTERVAL = 10000; // 10 seconds\nconst DISASTER_CHANCE = 0.002; // 0.2% chance per second\n\nconst initialResources: Resources = {\n  food: 100,\n  water: 100,\n  materials: 50,\n  survivors: 5,\n};\n\nconst disasters: Disaster[] = [\n  {\n    id: \"raiders\",\n    name: \"Raider Attack!\",\n    description: \"Raiders have attacked your base!\",\n    effect: { food: -20, water: -15, materials: -10 },\n  },\n  {\n    id: \"drought\",\n    name: \"Drought\",\n    description: \"Water supplies are running low!\",\n    effect: { water: -30 },\n  },\n  {\n    id: \"sickness\",\n    name: \"Disease Outbreak\",\n    description: \"A disease has spread through your camp!\",\n    effect: { survivors: -1, food: -10 },\n  },\n];\n\nconst ApocalypticGame: React.FC = () => {\n  // State\n  const [resources, setResources] = useState<Resources>(initialResources);\n  const [activeTab, setActiveTab] = useState<\"resources\" | \"map\">(\"resources\");\n  const [isMobile, setIsMobile] = useState(false);\n  const [showRadialMenu, setShowRadialMenu] = useState(false);\n  const [radialMenuPosition, setRadialMenuPosition] = useState({ x: 0, y: 0 });\n  const [selectedLocation, setSelectedLocation] = useState<MapLocation | null>(\n    null,\n  );\n  const [showDisaster, setShowDisaster] = useState<Disaster | null>(null);\n  const [autoScavengeEnabled, setAutoScavengeEnabled] = useState(true);\n\n  const [scavengeResult, setScavengeResult] =\n    useState<Partial<Resources> | null>(null);\n\n  const [waitingForScavengePopup, setWaitingForScavengePopup] = useState(false);\n\n  const gameLoopRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const autoSaveRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const [upgrades, setUpgrades] = useState<BaseUpgrade[]>([\n    {\n      id: \"farm\",\n      name: \"Makeshift Farm\",\n      description: \"Produces food over time\",\n      cost: { materials: 50 },\n      effect: \"+2 food/minute\",\n      level: 0,\n      maxLevel: 5,\n    },\n    {\n      id: \"well\",\n      name: \"Water Collector\",\n      description: \"Collects water from the atmosphere\",\n      cost: { materials: 40 },\n      effect: \"+1 water/minute\",\n      level: 0,\n      maxLevel: 5,\n    },\n    {\n      id: \"shelter\",\n      name: \"Survivor Shelter\",\n      description: \"Attracts new survivors\",\n      cost: { materials: 100, food: 50 },\n      effect: \"+1 survivor chance/hour\",\n      level: 0,\n      maxLevel: 3,\n    },\n  ]);\n\n  const GRID_SIZE = 5;\n\n  const locationNames = [\n    \"Dustfield\",\n    \"Ashrock\",\n    \"Ironpit\",\n    \"Deadwell\",\n    \"Cragpoint\",\n    \"Burnpass\",\n    \"Mudspire\",\n    \"Wretchend\",\n    \"Redhollow\",\n    \"Saltmoor\",\n    \"Scraptown\",\n    \"Charcliff\",\n    \"Dryreach\",\n    \"Ragbank\",\n    \"Blightden\",\n    \"Boneplain\",\n    \"Rustbarrow\",\n    \"Smokefall\",\n    \"Shivglen\",\n    \"Flintgorge\",\n    \"Gravefen\",\n    \"Scorchbay\",\n    \"Fogscar\",\n    \"Ruinstep\",\n    \"Crimsonlot\",\n  ];\n\n  const generateInitialGrid = (): MapLocation[] => {\n    const locations: MapLocation[] = [];\n\n    for (let y = 0; y < GRID_SIZE; y++) {\n      for (let x = 0; x < GRID_SIZE; x++) {\n        const isBase =\n          x === Math.floor(GRID_SIZE / 2) && y === Math.floor(GRID_SIZE / 2);\n\n        locations.push({\n          id: `cell-${x}-${y}`,\n          name: isBase\n            ? \"Your Base\"\n            : locationNames[y * GRID_SIZE + x] || `Sector-${x}-${y}`,\n          isBase: isBase,\n          x,\n          y,\n          discovered: isBase,\n          scavengeTime: isBase ? 0 : 5000 + Math.floor(Math.random() * 5000),\n          lastScavenged: null,\n          resources: isBase\n            ? {}\n            : Math.random() < 0.6 // change of having resoureces on newly discovered locations\n            ? {\n                food: Math.floor(Math.random() * 30),\n                water: Math.floor(Math.random() * 20),\n                materials:\n                  Math.random() < 0.5 ? Math.floor(Math.random() * 40) : 0,\n                survivors: Math.random() < 0.2 ? 1 : 0,\n              }\n            : {},\n        });\n      }\n    }\n\n    return locations;\n  };\n\n  const [locations, setLocations] = useState<MapLocation[]>(\n    generateInitialGrid(),\n  );\n\n  const resourcesRef = useRef(resources);\n  const upgradesRef = useRef(upgrades);\n\n  // Update refs whenever state changes\n  useEffect(() => {\n    resourcesRef.current = resources;\n  }, [resources]);\n  useEffect(() => {\n    upgradesRef.current = upgrades;\n  }, [upgrades]);\n\n  // Responsive design\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n    return () => window.removeEventListener(\"resize\", checkMobile);\n  }, []);\n\n  // Load game\n  useEffect(() => {\n    const savedGame = localStorage.getItem(SAVE_KEY);\n    if (savedGame) {\n      try {\n        const gameState: GameState = JSON.parse(savedGame);\n        const timePassed = Date.now() - gameState.lastSave;\n\n        // Calculate offline progression\n        const minutesPassed = timePassed / 60000;\n        const offlineResources = { ...gameState.resources };\n\n        gameState.upgrades.forEach((upgrade) => {\n          if (upgrade.id === \"farm\" && upgrade.level > 0) {\n            offlineResources.food += Math.floor(\n              minutesPassed * 2 * upgrade.level * 0.5,\n            ); // 50% efficiency offline\n          }\n          if (upgrade.id === \"well\" && upgrade.level > 0) {\n            offlineResources.water += Math.floor(\n              minutesPassed * 1 * upgrade.level * 0.5,\n            );\n          }\n          if (upgrade.id === \"shelter\" && upgrade.level > 0) {\n            offlineResources.survivors += Math.floor(\n              minutesPassed * (1 / 60) * upgrade.level * 0.5,\n            );\n          }\n        });\n\n        setResources(offlineResources);\n        setUpgrades(gameState.upgrades);\n        setLocations(gameState.locations);\n        setAutoScavengeEnabled(gameState.autoScavengeEnabled);\n      } catch (e) {\n        console.error(\"Failed to load save:\", e);\n      }\n    }\n  }, []);\n\n  // Save game\n  const saveGame = useCallback(() => {\n    const gameState: GameState = {\n      resources,\n      upgrades,\n      locations,\n      lastSave: Date.now(),\n      autoScavengeEnabled,\n    };\n    localStorage.setItem(SAVE_KEY, JSON.stringify(gameState));\n  }, [resources, upgrades, locations, autoScavengeEnabled]);\n\n  // Auto save\n  useEffect(() => {\n    autoSaveRef.current = setInterval(saveGame, AUTO_SAVE_INTERVAL);\n    return () => {\n      if (autoSaveRef.current) clearInterval(autoSaveRef.current);\n    };\n  }, [saveGame]);\n\n  function floorResources(res: Resources): Resources {\n    return {\n      food: Math.floor(res.food),\n      water: Math.floor(res.water),\n      materials: Math.floor(res.materials),\n      survivors: Math.floor(res.survivors),\n    };\n  }\n\n  function isEqualResources(a: Resources, b: Resources): boolean {\n    return (\n      a.food === b.food &&\n      a.water === b.water &&\n      a.materials === b.materials &&\n      a.survivors === b.survivors\n    );\n  }\n\n  // Game loop\n  useEffect(() => {\n    gameLoopRef.current = setInterval(() => {\n      setResources((prev) => {\n        const newResources = { ...prev };\n\n        // Apply upgrade effects\n        upgrades.forEach((upgrade) => {\n          if (upgrade.id === \"farm\" && upgrade.level > 0) {\n            newResources.food += (2 * upgrade.level) / 60; // per second\n          }\n          if (upgrade.id === \"well\" && upgrade.level > 0) {\n            newResources.water += (1 * upgrade.level) / 60;\n          }\n          if (upgrade.id === \"shelter\" && upgrade.level > 0) {\n            newResources.survivors += (1 * upgrade.level) / 3600; // 1 per hour\n          }\n        });\n\n        // Survivor consumption\n        newResources.food = Math.max(\n          0,\n          newResources.food - prev.survivors * 0.01,\n        );\n        newResources.water = Math.max(\n          0,\n          newResources.water - prev.survivors * 0.02,\n        );\n\n        // Floor and compare\n        const floored = floorResources(newResources);\n        if (!isEqualResources(floored, floorResources(prev))) {\n          return floored;\n        }\n        return prev; // Skip update if unchanged\n      });\n\n      // Check for disasters\n      if (Math.random() < DISASTER_CHANCE) {\n        const disaster =\n          disasters[Math.floor(Math.random() * disasters.length)];\n        setShowDisaster(disaster);\n        applyDisaster(disaster);\n      }\n\n      // Auto scavenging\n      if (autoScavengeEnabled) {\n        checkAutoScavenge();\n      }\n    }, 2000);\n\n    return () => {\n      if (gameLoopRef.current) clearInterval(gameLoopRef.current);\n    };\n  }, [upgrades, autoScavengeEnabled]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = Date.now();\n      if (waitingForScavengePopup || scavengeResult) return;\n\n      const finished = locations.find(\n        (loc) =>\n          loc.lastScavenged &&\n          loc.scavengeTime > 0 &&\n          now - loc.lastScavenged >= loc.scavengeTime,\n      );\n\n      if (finished) finalizeScavenge(finished);\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [locations, waitingForScavengePopup, scavengeResult]);\n\n  const applyDisaster = (disaster: Disaster) => {\n    setResources((prev) => ({\n      food: Math.max(0, prev.food + (disaster.effect.food || 0)),\n      water: Math.max(0, prev.water + (disaster.effect.water || 0)),\n      materials: Math.max(0, prev.materials + (disaster.effect.materials || 0)),\n      survivors: Math.max(1, prev.survivors + (disaster.effect.survivors || 0)),\n    }));\n  };\n\n  const checkAutoScavenge = () => {\n    if (waitingForScavengePopup) return;\n\n    const now = Date.now();\n\n    setLocations((prev) => {\n      let hasActiveScavenge = false;\n      let updated = false;\n\n      const newLocations = prev.map((loc) => {\n        if (loc.lastScavenged && loc.scavengeTime > 0) {\n          if (now - loc.lastScavenged >= loc.scavengeTime && !updated) {\n            const loot = {\n              food: loc.resources.food || 0,\n              water: loc.resources.water || 0,\n              materials: loc.resources.materials || 0,\n              survivors: loc.resources.survivors || 0,\n            };\n\n            finalizeScavenge(loc);\n            updated = true;\n            return loc;\n          }\n\n          hasActiveScavenge = true;\n          return loc;\n        }\n\n        return loc;\n      });\n\n      if (!hasActiveScavenge && !updated) {\n        // Start auto-scavenge on the first available location\n        const targetIndex = newLocations.findIndex(\n          (loc) =>\n            loc.discovered &&\n            !loc.lastScavenged &&\n            loc.scavengeTime > 0 &&\n            Object.values(loc.resources).some((v) => v && v > 0),\n        );\n\n        if (targetIndex !== -1) {\n          newLocations[targetIndex] = {\n            ...newLocations[targetIndex],\n            lastScavenged: now,\n          };\n          updated = true;\n        }\n      }\n\n      return newLocations;\n    });\n  };\n\n  const finalizeScavenge = (location: MapLocation) => {\n    const loot = {\n      food: location.resources.food || 0,\n      water: location.resources.water || 0,\n      materials: location.resources.materials || 0,\n      survivors: location.resources.survivors || 0,\n    };\n\n    setScavengeResult(loot);\n    setResources((prevResources) => ({\n      food: prevResources.food + loot.food,\n      water: prevResources.water + loot.water,\n      materials: prevResources.materials + loot.materials,\n      survivors: prevResources.survivors + loot.survivors,\n    }));\n    setWaitingForScavengePopup(true);\n\n    setLocations((prev) =>\n      prev.map((loc) =>\n        loc.id === location.id\n          ? { ...loc, lastScavenged: null, resources: {}, wasScavenged: true }\n          : loc,\n      ),\n    );\n  };\n\n  const handleMapClick = (\n    e: React.MouseEvent<HTMLDivElement>,\n    location: MapLocation,\n  ) => {\n    e.stopPropagation();\n    if (!location.discovered && location.id !== \"base\") return;\n\n    setSelectedLocation(location);\n    setRadialMenuPosition({ x: e.clientX, y: e.clientY });\n    setShowRadialMenu(true);\n  };\n\n  const scavengeLocation = (location: MapLocation) => {\n    if (location.lastScavenged || location.scavengeTime === 0) return;\n\n    setLocations((prev) =>\n      prev.map((loc) =>\n        loc.id === location.id ? { ...loc, lastScavenged: Date.now() } : loc,\n      ),\n    );\n    setShowRadialMenu(false);\n  };\n\n  const exploreNearby = () => {\n    if (!selectedLocation) return;\n\n    const getGridCoords = (id: string) => {\n      const match = id.match(/cell-(\\d+)-(\\d+)/);\n      if (!match) return null;\n      return { x: parseInt(match[1]), y: parseInt(match[2]) };\n    };\n\n    const selectedCoords = getGridCoords(selectedLocation.id);\n    if (!selectedCoords) return;\n\n    setLocations((prev) =>\n      prev.map((loc) => {\n        const coords = getGridCoords(loc.id);\n        if (!coords || loc.discovered) return loc;\n\n        const dx = Math.abs(coords.x - selectedCoords.x);\n        const dy = Math.abs(coords.y - selectedCoords.y);\n\n        if (dx <= 1 && dy <= 1) {\n          return { ...loc, discovered: true };\n        }\n\n        return loc;\n      }),\n    );\n\n    setShowRadialMenu(false);\n  };\n\n  const purchaseUpgrade = (upgrade: BaseUpgrade) => {\n    if (upgrade.level >= upgrade.maxLevel) return;\n\n    const canAfford = Object.entries(upgrade.cost).every(\n      ([resource, cost]) =>\n        resources[resource as keyof Resources] >= (cost || 0),\n    );\n\n    if (canAfford) {\n      setResources((prev) => {\n        const newResources = { ...prev };\n        Object.entries(upgrade.cost).forEach(([resource, cost]) => {\n          newResources[resource as keyof Resources] -= cost || 0;\n        });\n        return newResources;\n      });\n\n      setUpgrades((prev) =>\n        prev.map((u) =>\n          u.id === upgrade.id\n            ? {\n                ...u,\n                level: u.level + 1,\n                cost: Object.fromEntries(\n                  Object.entries(u.cost).map(([r, c]) => [\n                    r,\n                    Math.floor((c || 0) * 1.5),\n                  ]),\n                ),\n              }\n            : u,\n        ),\n      );\n    }\n  };\n\n  const getScavengeProgress = (location: MapLocation) => {\n    if (!location.lastScavenged || location.scavengeTime === 0) return 0;\n    const elapsed = Date.now() - location.lastScavenged;\n    return Math.min(100, (elapsed / location.scavengeTime) * 100);\n  };\n\n  // Components\n  const ResourcePanel = React.memo(\n    ({\n      resources,\n      upgrades,\n      autoScavengeEnabled,\n      purchaseUpgrade,\n      setAutoScavengeEnabled,\n    }: {\n      resources: Resources;\n      upgrades: BaseUpgrade[];\n      autoScavengeEnabled: boolean;\n      purchaseUpgrade: (upgrade: BaseUpgrade) => void;\n      setAutoScavengeEnabled: (enabled: boolean) => void;\n    }) => {\n      return (\n        <div className=\"bg-gray-800 rounded-lg p-6 shadow-lg h-[calc(100%-60px)] flex flex-col\">\n          <div className=\"flex-none\">\n            <h2 className=\"text-2xl font-bold text-gray-100 mb-6\">Resources</h2>\n            <div className=\"grid grid-cols-2 gap-4 mb-8\">\n              <div className=\"bg-gray-700 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-300\">ðŸ– Food</span>\n                  <span className=\"text-xl font-semibold text-green-400\">\n                    {Math.floor(resources.food)}\n                  </span>\n                </div>\n              </div>\n              <div className=\"bg-gray-700 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-300\">ðŸ’§ Water</span>\n                  <span className=\"text-xl font-semibold text-blue-400\">\n                    {Math.floor(resources.water)}\n                  </span>\n                </div>\n              </div>\n              <div className=\"bg-gray-700 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-300\">ðŸ”§ Materials</span>\n                  <span className=\"text-xl font-semibold text-orange-400\">\n                    {Math.floor(resources.materials)}\n                  </span>\n                </div>\n              </div>\n              <div className=\"bg-gray-700 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-300\">ðŸ‘¥ Survivors</span>\n                  <span className=\"text-xl font-semibold text-purple-400\">\n                    {resources.survivors}\n                  </span>\n                </div>\n              </div>\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-100 mb-4\">\n              Base Upgrades\n            </h3>\n          </div>\n\n          <div className=\"flex-grow overflow-y-auto md:pr-2\">\n            <div className=\"space-y-3\">\n              {upgrades.map((upgrade) => {\n                const canAfford = Object.entries(upgrade.cost).every(\n                  ([resource, cost]) =>\n                    resources[resource as keyof Resources] >= (cost || 0),\n                );\n\n                return (\n                  <div\n                    key={upgrade.id}\n                    className=\"bg-gray-700 rounded-lg p-3 shadow-md flex gap-4\"\n                  >\n                    <div className=\"flex justify-between items-center mb-2 flex-grow border-r border-gray-600 md:pr-4\">\n                      <div>\n                        <div className=\"flex items-center gap-2\">\n                          <h4 className=\"text-sm font-semibold text-gray-100\">\n                            {upgrade.name}\n                          </h4>\n                          <p className=\"text-xs text-green-400 mt-1\">\n                            {upgrade.effect}\n                          </p>\n                        </div>\n                        <p className=\"text-xs text-gray-400\">\n                          {upgrade.description}\n                        </p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-sm text-gray-300\">\n                          Level {upgrade.level}/{upgrade.maxLevel}\n                        </p>\n                      </div>\n                    </div>\n                    {upgrade.level < upgrade.maxLevel && (\n                      <button\n                        onClick={() => purchaseUpgrade(upgrade)}\n                        disabled={!canAfford}\n                        className={`ml-auto mr-0 w-full max-w-20 sm:max-w-40 px-4 py-2 rounded-md transition-colors text-xs md:text-sm leading-4 ${\n                          canAfford\n                            ? \"bg-green-600 hover:bg-green-700 text-white\"\n                            : \"bg-gray-600 text-gray-400 cursor-not-allowed\"\n                        }`}\n                      >\n                        <p>Upgrade</p>\n                        <p>\n                          (\n                          {Object.entries(upgrade.cost)\n                            .map(([r, c]) => `${c} ${r}`)\n                            .join(\", \")}\n                          )\n                        </p>\n                      </button>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          <div className=\"flex-none mt-4 pt-4 border-t border-gray-700\">\n            <label className=\"flex items-center space-x-2 text-gray-300\">\n              <input\n                type=\"checkbox\"\n                checked={autoScavengeEnabled}\n                onChange={(e) => setAutoScavengeEnabled(e.target.checked)}\n                className=\"rounded\"\n              />\n              <span>Auto-scavenge locations</span>\n            </label>\n          </div>\n        </div>\n      );\n    },\n  );\n\n  const ScavengePopup = () => {\n    if (!scavengeResult) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50\">\n        <div className=\"bg-gray-800 rounded-lg p-6 max-w-sm shadow-2xl\">\n          <h3 className=\"text-xl font-bold text-green-400 mb-2\">\n            Resources Found!\n          </h3>\n          <ul className=\"text-gray-200 space-y-1 mb-4\">\n            {Object.entries(scavengeResult).map(([key, value]) =>\n              value > 0 ? (\n                <li key={key}>\n                  {key}:{\" \"}\n                  <span className=\"font-semibold text-white\">{value}</span>\n                </li>\n              ) : null,\n            )}\n          </ul>\n          <button\n            onClick={() => {\n              setScavengeResult(null);\n              setWaitingForScavengePopup(false); // Enables next scavenge\n            }}\n            className=\"w-full bg-green-700 hover:bg-green-800 text-white py-2 px-4 rounded transition-colors\"\n          >\n            Continue\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const MapView = () => (\n    <div className=\"bg-gray-800 rounded-lg p-2 sm:p-6 shadow-lg h-full\">\n      <h2 className=\"text-2xl font-bold text-gray-100 mb-6\">Wasteland Map</h2>\n      <div\n        className=\"grid bg-gray-900 rounded-lg aspect-square shadow-inner\"\n        style={{\n          gridTemplateColumns: `repeat(${GRID_SIZE}, 1fr)`,\n          gridTemplateRows: `repeat(${GRID_SIZE}, 1fr)`,\n        }}\n        onClick={() => setShowRadialMenu(false)}\n      >\n        {locations.map((location) => {\n          return (\n            <div\n              key={location.id}\n              className={`flex items-center justify-center ${\n                location.discovered ? \"cursor-pointer\" : \"opacity-50\"\n              }`}\n              onClick={(e) => handleMapClick(e, location)}\n            >\n              {location.discovered ? (\n                <div className=\"relative group\">\n                  <div\n                    className={`w-16 h-16 rounded-sm flex items-center justify-center text-2xl shadow-lg transform transition-transform group-hover:scale-110 ${\n                      location.id === \"base\" ? \"bg-green-600\" : \"bg-blue-600\"\n                    }`}\n                  >\n                    {location.isBase\n                      ? \"ðŸ \"\n                      : location.wasScavenged\n                      ? \"âœ…\"\n                      : location.resources &&\n                        Object.values(location.resources).some(\n                          (val) => val && val > 0,\n                        )\n                      ? \"ðŸ’°\"\n                      : \"\"}\n                  </div>\n                  <div className=\"absolute -bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap\">\n                    <p className=\"text-xs text-gray-300\">{location.name}</p>\n                  </div>\n                  {location.lastScavenged && location.scavengeTime > 0 && (\n                    <div className=\"absolute bottom-1 left-2 right-2 h-1 bg-gray-700 rounded\">\n                      <div\n                        className=\"h-full bg-green-500 rounded transition-all duration-1000\"\n                        style={{ width: `${getScavengeProgress(location)}%` }}\n                      />\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"w-16 h-16 rounded-sm bg-gray-700 flex items-center justify-center text-2xl opacity-35 animate-pulse\"></div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n\n  const RadialMenu = () => {\n    if (!showRadialMenu || !selectedLocation) return null;\n\n    const actions = [\n      {\n        label: \"Scavenge\",\n        icon: \"ðŸ”\",\n        enabled:\n          !selectedLocation.lastScavenged &&\n          selectedLocation.scavengeTime > 0 &&\n          Object.values(selectedLocation.resources).some(\n            (val) => val && val > 0,\n          ),\n        action: () => scavengeLocation(selectedLocation),\n      },\n      {\n        label: \"Explore\",\n        icon: \"ðŸ—ºï¸\",\n        enabled: true,\n        action: exploreNearby,\n      },\n      {\n        label: \"Cancel\",\n        icon: \"âŒ\",\n        enabled: true,\n        action: () => setShowRadialMenu(false),\n      },\n    ];\n\n    return (\n      <div\n        className=\"fixed inset-0 z-50\"\n        onClick={() => setShowRadialMenu(false)}\n      >\n        <div\n          className=\"absolute\"\n          style={{ left: radialMenuPosition.x, top: radialMenuPosition.y }}\n        >\n          {actions.map((action, index) => {\n            const angle = (index * 120 - 60) * (Math.PI / 180);\n            const x = Math.cos(angle) * 80;\n            const y = Math.sin(angle) * 80;\n\n            return (\n              <button\n                key={action.label}\n                disabled={!action.enabled}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  action.action();\n                }}\n                className={`absolute transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full flex flex-col items-center justify-center text-white transition-all ${\n                  action.enabled\n                    ? \"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl\"\n                    : \"bg-gray-600 cursor-not-allowed opacity-50\"\n                }`}\n                style={{ left: x, top: y }}\n              >\n                <span className=\"text-xl\">{action.icon}</span>\n                <span className=\"text-xs mt-1\">{action.label}</span>\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const DisasterPopup = () => {\n    if (!showDisaster) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n        <div className=\"bg-red-900 rounded-lg p-6 max-w-sm shadow-2xl animate-pulse\">\n          <h3 className=\"text-2xl font-bold text-white mb-2\">\n            {showDisaster.name}\n          </h3>\n          <p className=\"text-gray-200 mb-4\">{showDisaster.description}</p>\n          <div className=\"text-sm text-gray-300 mb-4\">\n            {Object.entries(showDisaster.effect).map(([resource, amount]) => (\n              <p key={resource}>\n                {resource}: {amount}\n              </p>\n            ))}\n          </div>\n          <button\n            onClick={() => setShowDisaster(null)}\n            className=\"w-full bg-red-700 hover:bg-red-800 text-white py-2 px-4 rounded transition-colors\"\n          >\n            Continue\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white\">\n      {isMobile ? (\n        // Mobile layout with tabs\n        <div className=\"px-2 py-4\">\n          <h1 className=\"text-3xl font-bold text-center mb-6\">\n            Wasteland Survivor\n          </h1>\n          <div className=\"flex mb-4 bg-gray-800 rounded-lg p-1\">\n            <button\n              onClick={() => setActiveTab(\"resources\")}\n              className={`flex-1 py-2 px-4 rounded-md transition-colors ${\n                activeTab === \"resources\"\n                  ? \"bg-gray-700 text-white\"\n                  : \"text-gray-400 hover:text-white\"\n              }`}\n            >\n              Resources\n            </button>\n            <button\n              onClick={() => setActiveTab(\"map\")}\n              className={`flex-1 py-2 px-4 rounded-md transition-colors ${\n                activeTab === \"map\"\n                  ? \"bg-gray-700 text-white\"\n                  : \"text-gray-400 hover:text-white\"\n              }`}\n            >\n              Map\n            </button>\n          </div>\n          {activeTab === \"resources\" ? (\n            <ResourcePanel\n              resources={resources}\n              upgrades={upgrades}\n              autoScavengeEnabled={autoScavengeEnabled}\n              purchaseUpgrade={purchaseUpgrade}\n              setAutoScavengeEnabled={setAutoScavengeEnabled}\n            />\n          ) : (\n            <MapView />\n          )}\n        </div>\n      ) : (\n        // Desktop split-screen layout\n        <div className=\"flex h-screen\">\n          <div className=\"w-1/2 p-6 overflow-y-auto\">\n            <h1 className=\"text-3xl font-bold mb-6\">Wasteland Survivor</h1>\n            <ResourcePanel\n              resources={resources}\n              upgrades={upgrades}\n              autoScavengeEnabled={autoScavengeEnabled}\n              purchaseUpgrade={purchaseUpgrade}\n              setAutoScavengeEnabled={setAutoScavengeEnabled}\n            />\n          </div>\n          <div className=\"w-1/2 p-6 border-l border-gray-700 flex flex-col h-full\">\n            <MapView />\n          </div>\n        </div>\n      )}\n\n      <RadialMenu />\n      <DisasterPopup />\n      <ScavengePopup />\n    </div>\n  );\n};\n\nexport default ApocalypticGame;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}