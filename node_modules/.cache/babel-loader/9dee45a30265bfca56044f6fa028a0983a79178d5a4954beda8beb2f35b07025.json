{"ast":null,"code":"var _jsxFileName = \"/Users/faybennett/outlierTasks/game-app/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\n\n// Types\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// Constants\nconst SAVE_KEY = \"apocalypse-idle-save\";\nconst AUTO_SAVE_INTERVAL = 10000; // 10 seconds\nconst DISASTER_CHANCE = 0.002; // 0.2% chance per second\n\nconst initialResources = {\n  food: 100,\n  water: 100,\n  materials: 50,\n  survivors: 5\n};\nconst disasters = [{\n  id: \"raiders\",\n  name: \"Raider Attack!\",\n  description: \"Raiders have attacked your base!\",\n  effect: {\n    food: -20,\n    water: -15,\n    materials: -10\n  }\n}, {\n  id: \"drought\",\n  name: \"Drought\",\n  description: \"Water supplies are running low!\",\n  effect: {\n    water: -30\n  }\n}, {\n  id: \"sickness\",\n  name: \"Disease Outbreak\",\n  description: \"A disease has spread through your camp!\",\n  effect: {\n    survivors: -1,\n    food: -10\n  }\n}];\nconst ApocalypticGame = () => {\n  _s();\n  // State\n  const [resources, setResources] = useState(initialResources);\n  const [activeTab, setActiveTab] = useState(\"resources\");\n  const [isMobile, setIsMobile] = useState(false);\n  const [showRadialMenu, setShowRadialMenu] = useState(false);\n  const [radialMenuPosition, setRadialMenuPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  const [showDisaster, setShowDisaster] = useState(null);\n  const [autoScavengeEnabled, setAutoScavengeEnabled] = useState(true);\n  const [scavengeResult, setScavengeResult] = useState(null);\n  const [showAttackResult, setShowAttackResult] = useState(null);\n  const [waitingForScavengePopup, setWaitingForScavengePopup] = useState(false);\n  const [showTakeoverAnimation, setShowTakeoverAnimation] = useState(null);\n  const gameLoopRef = useRef(null);\n  const autoSaveRef = useRef(null);\n  const [upgrades, setUpgrades] = useState([{\n    id: \"farm\",\n    name: \"Makeshift Farm\",\n    description: \"Produces food over time\",\n    cost: {\n      materials: 50\n    },\n    effect: \"+2 food/minute\",\n    level: 0,\n    maxLevel: 5\n  }, {\n    id: \"well\",\n    name: \"Water Collector\",\n    description: \"Collects water from the atmosphere\",\n    cost: {\n      materials: 40\n    },\n    effect: \"+1 water/minute\",\n    level: 0,\n    maxLevel: 5\n  }, {\n    id: \"shelter\",\n    name: \"Survivor Shelter\",\n    description: \"Attracts new survivors\",\n    cost: {\n      materials: 100,\n      food: 50\n    },\n    effect: \"+1 survivor chance/hour\",\n    level: 0,\n    maxLevel: 3\n  }]);\n  const GRID_SIZE = 5;\n  const locationNames = [\"Dustfield\", \"Ashrock\", \"Ironpit\", \"Deadwell\", \"Cragpoint\", \"Burnpass\", \"Mudspire\", \"Wretchend\", \"Redhollow\", \"Saltmoor\", \"Scraptown\", \"Charcliff\", \"Dryreach\", \"Ragbank\", \"Blightden\", \"Boneplain\", \"Rustbarrow\", \"Smokefall\", \"Shivglen\", \"Flintgorge\", \"Gravefen\", \"Scorchbay\", \"Fogscar\", \"Ruinstep\", \"Crimsonlot\"];\n  const generateInitialGrid = () => {\n    const locations = [];\n    for (let y = 0; y < GRID_SIZE; y++) {\n      for (let x = 0; x < GRID_SIZE; x++) {\n        const isBase = x === Math.floor(GRID_SIZE / 2) && y === Math.floor(GRID_SIZE / 2);\n        locations.push({\n          id: `cell-${x}-${y}`,\n          name: isBase ? \"Your Base\" : locationNames[y * GRID_SIZE + x] || `Sector-${x}-${y}`,\n          isBase: isBase,\n          x,\n          y,\n          discovered: isBase,\n          scavengeTime: isBase ? 0 : 5000 + Math.floor(Math.random() * 5000),\n          lastScavenged: null,\n          resources: isBase ? {} : Math.random() < 0.6 // change of having resoureces on newly discovered locations\n          ? {\n            food: Math.floor(Math.random() * 30),\n            water: Math.floor(Math.random() * 20),\n            materials: Math.random() < 0.5 ? Math.floor(Math.random() * 40) : 0,\n            survivors: Math.random() < 0.2 ? 1 : 0\n          } : {},\n          owner: isBase ? \"player\" : null // Set owner for base and null for others\n        });\n      }\n    }\n    return locations;\n  };\n  const [locations, setLocations] = useState(generateInitialGrid());\n  const resourcesRef = useRef(resources);\n  const upgradesRef = useRef(upgrades);\n\n  // Update refs whenever state changes\n  useEffect(() => {\n    resourcesRef.current = resources;\n  }, [resources]);\n  useEffect(() => {\n    upgradesRef.current = upgrades;\n  }, [upgrades]);\n\n  // Responsive design\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n    return () => window.removeEventListener(\"resize\", checkMobile);\n  }, []);\n\n  // Load game\n  useEffect(() => {\n    const savedGame = localStorage.getItem(SAVE_KEY);\n    if (savedGame) {\n      try {\n        const gameState = JSON.parse(savedGame);\n        const timePassed = Date.now() - gameState.lastSave;\n\n        // Calculate offline progression\n        const minutesPassed = timePassed / 60000;\n        const offlineResources = {\n          ...gameState.resources\n        };\n        gameState.upgrades.forEach(upgrade => {\n          if (upgrade.id === \"farm\" && upgrade.level > 0) {\n            offlineResources.food += Math.floor(minutesPassed * 2 * upgrade.level * 0.5); // 50% efficiency offline\n          }\n          if (upgrade.id === \"well\" && upgrade.level > 0) {\n            offlineResources.water += Math.floor(minutesPassed * 1 * upgrade.level * 0.5);\n          }\n          if (upgrade.id === \"shelter\" && upgrade.level > 0) {\n            offlineResources.survivors += Math.floor(minutesPassed * (1 / 60) * upgrade.level * 0.5);\n          }\n        });\n        setResources(offlineResources);\n        setUpgrades(gameState.upgrades);\n        setLocations(gameState.locations);\n        setAutoScavengeEnabled(gameState.autoScavengeEnabled);\n      } catch (e) {\n        console.error(\"Failed to load save:\", e);\n      }\n    }\n  }, []);\n\n  // Save game\n  const saveGame = useCallback(() => {\n    const gameState = {\n      resources,\n      upgrades,\n      locations,\n      lastSave: Date.now(),\n      autoScavengeEnabled\n    };\n    localStorage.setItem(SAVE_KEY, JSON.stringify(gameState));\n  }, [resources, upgrades, locations, autoScavengeEnabled]);\n\n  // Auto save\n  useEffect(() => {\n    autoSaveRef.current = setInterval(saveGame, AUTO_SAVE_INTERVAL);\n    return () => {\n      if (autoSaveRef.current) clearInterval(autoSaveRef.current);\n    };\n  }, [saveGame]);\n  function floorResources(res) {\n    return {\n      food: Math.floor(res.food),\n      water: Math.floor(res.water),\n      materials: Math.floor(res.materials),\n      survivors: Math.floor(res.survivors)\n    };\n  }\n  function isEqualResources(a, b) {\n    return a.food === b.food && a.water === b.water && a.materials === b.materials && a.survivors === b.survivors;\n  }\n\n  // Game loop\n  useEffect(() => {\n    gameLoopRef.current = setInterval(() => {\n      setResources(prev => {\n        const newResources = {\n          ...prev\n        };\n\n        // Apply upgrade effects\n        upgrades.forEach(upgrade => {\n          if (upgrade.id === \"farm\" && upgrade.level > 0) {\n            newResources.food += 2 * upgrade.level / 60; // per second\n          }\n          if (upgrade.id === \"well\" && upgrade.level > 0) {\n            newResources.water += 1 * upgrade.level / 60;\n          }\n          if (upgrade.id === \"shelter\" && upgrade.level > 0) {\n            newResources.survivors += 1 * upgrade.level / 3600; // 1 per hour\n          }\n        });\n\n        // Survivor consumption\n        newResources.food = Math.max(0, newResources.food - prev.survivors * 0.01);\n        newResources.water = Math.max(0, newResources.water - prev.survivors * 0.02);\n\n        // Floor and compare\n        const floored = floorResources(newResources);\n        if (!isEqualResources(floored, floorResources(prev))) {\n          return floored;\n        }\n        return prev; // Skip update if unchanged\n      });\n\n      // Check for disasters\n      if (Math.random() < DISASTER_CHANCE) {\n        const disaster = disasters[Math.floor(Math.random() * disasters.length)];\n        setShowDisaster(disaster);\n        applyDisaster(disaster);\n      }\n\n      // Auto scavenging\n      if (autoScavengeEnabled) {\n        checkAutoScavenge();\n      }\n    }, 2000);\n    return () => {\n      if (gameLoopRef.current) clearInterval(gameLoopRef.current);\n    };\n  }, [upgrades, autoScavengeEnabled]);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = Date.now();\n      if (waitingForScavengePopup || scavengeResult) return;\n      const finished = locations.find(loc => loc.lastScavenged && loc.scavengeTime > 0 && now - loc.lastScavenged >= loc.scavengeTime);\n      if (finished) finalizeScavenge(finished);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [locations, waitingForScavengePopup, scavengeResult]);\n  const applyDisaster = disaster => {\n    setResources(prev => ({\n      food: Math.max(0, prev.food + (disaster.effect.food || 0)),\n      water: Math.max(0, prev.water + (disaster.effect.water || 0)),\n      materials: Math.max(0, prev.materials + (disaster.effect.materials || 0)),\n      survivors: Math.max(1, prev.survivors + (disaster.effect.survivors || 0))\n    }));\n  };\n  const checkAutoScavenge = () => {\n    if (waitingForScavengePopup) return;\n    const now = Date.now();\n    setLocations(prev => {\n      let hasActiveScavenge = false;\n      let updated = false;\n      const newLocations = prev.map(loc => {\n        if (loc.lastScavenged && loc.scavengeTime > 0) {\n          if (now - loc.lastScavenged >= loc.scavengeTime && !updated) {\n            const loot = {\n              food: loc.resources.food || 0,\n              water: loc.resources.water || 0,\n              materials: loc.resources.materials || 0,\n              survivors: loc.resources.survivors || 0\n            };\n            finalizeScavenge(loc);\n            updated = true;\n            return loc;\n          }\n          hasActiveScavenge = true;\n          return loc;\n        }\n        return loc;\n      });\n      if (!hasActiveScavenge && !updated) {\n        // Start auto-scavenge on the first available location\n        const targetIndex = newLocations.findIndex(loc => loc.discovered && !loc.lastScavenged && loc.scavengeTime > 0 && Object.values(loc.resources).some(v => v && v > 0));\n        if (targetIndex !== -1) {\n          newLocations[targetIndex] = {\n            ...newLocations[targetIndex],\n            lastScavenged: now\n          };\n          updated = true;\n        }\n      }\n      return newLocations;\n    });\n  };\n  const finalizeScavenge = location => {\n    const loot = {\n      food: location.resources.food || 0,\n      water: location.resources.water || 0,\n      materials: location.resources.materials || 0,\n      survivors: location.resources.survivors || 0\n    };\n    setScavengeResult(loot);\n    setResources(prevResources => ({\n      food: prevResources.food + loot.food,\n      water: prevResources.water + loot.water,\n      materials: prevResources.materials + loot.materials,\n      survivors: prevResources.survivors + loot.survivors\n    }));\n    setWaitingForScavengePopup(true);\n    setLocations(prev => prev.map(loc => loc.id === location.id ? {\n      ...loc,\n      lastScavenged: null,\n      resources: {},\n      wasScavenged: true\n    } : loc));\n  };\n  const handleMapClick = (e, location) => {\n    e.stopPropagation();\n    if (!location.discovered && location.id !== \"base\") return;\n    setSelectedLocation(location);\n    setRadialMenuPosition({\n      x: e.clientX,\n      y: e.clientY\n    });\n    setShowRadialMenu(true);\n  };\n  const scavengeLocation = location => {\n    if (location.lastScavenged || location.scavengeTime === 0) return;\n    setLocations(prev => prev.map(loc => loc.id === location.id ? {\n      ...loc,\n      lastScavenged: Date.now()\n    } : loc));\n    setShowRadialMenu(false);\n  };\n  const exploreNearby = () => {\n    if (!selectedLocation) return;\n    const getGridCoords = id => {\n      const match = id.match(/cell-(\\d+)-(\\d+)/);\n      if (!match) return null;\n      return {\n        x: parseInt(match[1]),\n        y: parseInt(match[2])\n      };\n    };\n    const selectedCoords = getGridCoords(selectedLocation.id);\n    if (!selectedCoords) return;\n    setLocations(prev => prev.map(loc => {\n      const coords = getGridCoords(loc.id);\n      if (!coords || loc.discovered) return loc;\n      const dx = Math.abs(coords.x - selectedCoords.x);\n      const dy = Math.abs(coords.y - selectedCoords.y);\n      if (dx <= 1 && dy <= 1) {\n        return {\n          ...loc,\n          discovered: true\n        };\n      }\n      return loc;\n    }));\n    setShowRadialMenu(false);\n  };\n  const purchaseUpgrade = upgrade => {\n    if (upgrade.level >= upgrade.maxLevel) return;\n    const canAfford = Object.entries(upgrade.cost).every(([resource, cost]) => resources[resource] >= (cost || 0));\n    if (canAfford) {\n      setResources(prev => {\n        const newResources = {\n          ...prev\n        };\n        Object.entries(upgrade.cost).forEach(([resource, cost]) => {\n          newResources[resource] -= cost || 0;\n        });\n        return newResources;\n      });\n      setUpgrades(prev => prev.map(u => u.id === upgrade.id ? {\n        ...u,\n        level: u.level + 1,\n        cost: Object.fromEntries(Object.entries(u.cost).map(([r, c]) => [r, Math.floor((c || 0) * 1.5)]))\n      } : u));\n    }\n  };\n  const getScavengeProgress = location => {\n    if (!location.lastScavenged || location.scavengeTime === 0) return 0;\n    const elapsed = Date.now() - location.lastScavenged;\n    return Math.min(100, elapsed / location.scavengeTime * 100);\n  };\n  const attackLocation = location => {\n    const success = Math.random() < 0.5; // 50% chance of success\n\n    if (success) {\n      const materialsGained = 20 + Math.floor(Math.random() * 30);\n      setResources(prev => ({\n        ...prev,\n        materials: prev.materials + materialsGained\n      }));\n      setLocations(prev => prev.map(loc => loc.id === location.id ? {\n        ...loc,\n        owner: \"player\"\n      } : loc));\n      setShowAttackResult({\n        success: true,\n        locationName: location.name,\n        resourcesGained: {\n          materials: materialsGained\n        }\n      });\n      setShowTakeoverAnimation(location.id); // Trigger takeover animation\n    } else {\n      const survivorsLost = 1; // Always lose 1 survivor on failure\n      setResources(prev => ({\n        ...prev,\n        survivors: Math.max(0, prev.survivors - survivorsLost)\n      }));\n      setShowAttackResult({\n        success: false,\n        locationName: location.name,\n        survivorsLost: survivorsLost\n      });\n    }\n    setShowRadialMenu(false);\n  };\n  const buyBackLocation = location => {\n    const cost = {\n      materials: 50\n    }; // Example cost\n\n    const canAfford = Object.entries(cost).every(([resource, amount]) => resources[resource] >= (amount || 0));\n    if (canAfford) {\n      setResources(prev => {\n        const newResources = {\n          ...prev\n        };\n        Object.entries(cost).forEach(([resource, amount]) => {\n          newResources[resource] -= amount || 0;\n        });\n        return newResources;\n      });\n      setLocations(prev => prev.map(loc => loc.id === location.id ? {\n        ...loc,\n        owner: \"player\"\n      } : loc));\n      setShowTakeoverAnimation(location.id); // Trigger takeover animation\n      setShowRadialMenu(false);\n    } else {\n      // Optionally, add feedback for not being able to afford\n      console.log(\"Cannot afford to buy back this location.\");\n    }\n  };\n\n  // Components\n  const ResourcePanel = /*#__PURE__*/React.memo(({\n    resources,\n    upgrades,\n    autoScavengeEnabled,\n    purchaseUpgrade,\n    setAutoScavengeEnabled\n  }) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-gray-900 border border-gray-700 rounded-xl p-8 shadow-2xl h-full flex flex-col overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-br before:from-gray-800 before:via-gray-900 before:to-black before:opacity-50 before:rounded-xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-10 flex-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-4xl font-extrabold text-white mb-8 text-center drop-shadow-md\",\n          children: \"Resources\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative bg-gray-800 bg-opacity-70 backdrop-filter backdrop-blur-sm rounded-lg p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-700 flex flex-col items-center justify-center space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-4xl\",\n              children: \"\\uD83C\\uDF56\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-bold text-gray-100\",\n              children: \"Food\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-3xl font-semibold text-green-400\",\n              children: Math.floor(resources.food)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative bg-gray-800 bg-opacity-70 backdrop-filter backdrop-blur-sm rounded-lg p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-700 flex flex-col items-center justify-center space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-4xl\",\n              children: \"\\uD83D\\uDCA7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-bold text-gray-100\",\n              children: \"Water\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-3xl font-semibold text-blue-400\",\n              children: Math.floor(resources.water)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative bg-gray-800 bg-opacity-70 backdrop-filter backdrop-blur-sm rounded-lg p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-700 flex flex-col items-center justify-center space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-4xl\",\n              children: \"\\uD83D\\uDD27\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-bold text-gray-100\",\n              children: \"Materials\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-3xl font-semibold text-orange-400\",\n              children: Math.floor(resources.materials)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative bg-gray-800 bg-opacity-70 backdrop-filter backdrop-blur-sm rounded-lg p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-700 flex flex-col items-center justify-center space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-4xl\",\n              children: \"\\uD83D\\uDC65\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-bold text-gray-100\",\n              children: \"Survivors\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-3xl font-semibold text-purple-400\",\n              children: resources.survivors\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-3xl font-bold text-white mb-6 text-center drop-shadow-md\",\n          children: \"Base Upgrades\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-10 flex-grow overflow-y-auto pr-4 -mr-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: upgrades.map(upgrade => {\n            const canAfford = Object.entries(upgrade.cost).every(([resource, cost]) => resources[resource] >= (cost || 0));\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-800 bg-opacity-60 backdrop-filter backdrop-blur-sm rounded-xl p-5 shadow-lg flex flex-col md:flex-row items-center gap-4 border border-gray-700 hover:shadow-xl transition-shadow\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-grow text-center md:text-left\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col md:flex-row items-center gap-2 mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"text-xl font-semibold text-white\",\n                    children: upgrade.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 701,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-green-300\",\n                    children: upgrade.effect\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 704,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 700,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-300 mb-2\",\n                  children: upgrade.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-md font-medium text-gray-200\",\n                  children: [\"Level \", upgrade.level, \"/\", upgrade.maxLevel]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 699,\n                columnNumber: 21\n              }, this), upgrade.level < upgrade.maxLevel && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => purchaseUpgrade(upgrade),\n                disabled: !canAfford,\n                className: `w-full md:w-auto px-6 py-3 rounded-lg text-lg font-bold uppercase tracking-wider transition-all duration-300 transform hover:scale-105 shadow-md ${canAfford ? \"bg-gradient-to-r from-green-600 to-green-800 hover:from-green-700 hover:to-green-900 text-white\" : \"bg-gray-600 text-gray-400 cursor-not-allowed opacity-70\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Upgrade\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 725,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs mt-1 opacity-80\",\n                  children: [\"(\", Object.entries(upgrade.cost).map(([r, c]) => `${c} ${r}`).join(\", \"), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 726,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 716,\n                columnNumber: 23\n              }, this)]\n            }, upgrade.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-10 flex-none mt-8 pt-6 border-t border-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center justify-center space-x-3 text-gray-300 cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: autoScavengeEnabled,\n            onChange: e => setAutoScavengeEnabled(e.target.checked),\n            className: \"form-checkbox h-5 w-5 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-lg font-medium text-white\",\n            children: \"Auto-scavenge locations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 742,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 9\n    }, this);\n  });\n  const ScavengePopup = () => {\n    if (!scavengeResult) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative bg-gray-900 border border-gray-700 rounded-xl p-8 max-w-sm shadow-2xl text-center transform scale-95 opacity-0 animate-fade-in-scale\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-3xl font-bold text-green-500 mb-4 drop-shadow-md\",\n          children: \"Resources Found!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"text-gray-200 text-lg space-y-2 mb-6\",\n          children: Object.entries(scavengeResult).map(([key, value]) => value > 0 ? /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"capitalize mr-2\",\n              children: [key, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-white text-2xl\",\n              children: value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 771,\n              columnNumber: 19\n            }, this)]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 769,\n            columnNumber: 17\n          }, this) : null)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setScavengeResult(null);\n            setWaitingForScavengePopup(false); // Enables next scavenge\n          },\n          className: \"w-full px-6 py-3 rounded-lg text-lg font-bold uppercase tracking-wider transition-all duration-300 transform hover:scale-105 shadow-md bg-gradient-to-r from-green-600 to-green-800 hover:from-green-700 hover:to-green-900 text-white\",\n          children: \"Continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 776,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 762,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 761,\n      columnNumber: 7\n    }, this);\n  };\n  const MapView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative bg-gray-900 border border-gray-700 rounded-xl p-8 shadow-2xl h-full flex flex-col overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-br before:from-gray-800 before:via-gray-900 before:to-black before:opacity-50 before:rounded-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"relative z-10 text-4xl font-extrabold text-white mb-8 text-center drop-shadow-md\",\n      children: \"Wasteland Map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 792,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 grid bg-gray-950 border border-gray-700 rounded-lg aspect-square shadow-inner overflow-hidden\",\n      style: {\n        gridTemplateColumns: `repeat(${GRID_SIZE}, 1fr)`,\n        gridTemplateRows: `repeat(${GRID_SIZE}, 1fr)`\n      },\n      onClick: () => setShowRadialMenu(false),\n      children: locations.map(location => {\n        const isAnimatingTakeover = showTakeoverAnimation === location.id;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `relative flex items-center justify-center p-1 transition-all duration-300 group ${location.discovered ? \"cursor-pointer\" : \"opacity-30\"} ${isAnimatingTakeover ? 'animate-pulse-green' : ''}`,\n          onClick: e => handleMapClick(e, location),\n          children: location.discovered ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative w-full h-full flex flex-col items-center justify-center text-center rounded-md overflow-hidden shadow-md group-hover:shadow-lg transition-shadow duration-300 border-2 border-transparent group-hover:border-blue-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-full h-full flex items-center justify-center text-4xl transform transition-all duration-300 group-hover:scale-105 ${location.isBase || location.owner === \"player\" ? \"bg-green-700\" : \"bg-blue-700\"}`,\n              children: location.isBase ? \"ðŸ \" : location.owner === \"player\" ? \"âœ…\" // Owned by player, show checkmark or similar\n              : location.resources && Object.values(location.resources).some(val => val && val > 0) ? \"ðŸ’°\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-0 left-0 right-0 bg-gray-800 bg-opacity-80 p-1 text-center backdrop-blur-sm group-hover:bg-opacity-90 transition-opacity\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs font-semibold text-gray-200 truncate\",\n                children: location.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 828,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 827,\n              columnNumber: 19\n            }, this), location.lastScavenged && location.scavengeTime > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-0 left-0 right-0 h-1 bg-gray-700 rounded-t\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-full bg-yellow-500 rounded-t transition-all duration-1000\",\n                style: {\n                  width: `${getScavengeProgress(location)}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 834,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 833,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full h-full rounded-md bg-gray-800 flex items-center justify-center text-4xl opacity-50 animate-pulse border border-gray-700\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 842,\n            columnNumber: 17\n          }, this)\n        }, location.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 791,\n    columnNumber: 5\n  }, this);\n  useEffect(() => {\n    if (showTakeoverAnimation) {\n      const timer = setTimeout(() => {\n        setShowTakeoverAnimation(null);\n      }, 1500); // Animation duration\n      return () => clearTimeout(timer);\n    }\n  }, [showTakeoverAnimation]);\n  const RadialMenu = () => {\n    if (!showRadialMenu || !selectedLocation) return null;\n    const actions = [{\n      label: \"Scavenge\",\n      icon: \"ðŸ”\",\n      enabled: !selectedLocation.lastScavenged && selectedLocation.scavengeTime > 0 && Object.values(selectedLocation.resources).some(val => val && val > 0),\n      action: () => scavengeLocation(selectedLocation)\n    }, {\n      label: \"Attack\",\n      icon: \"âš”ï¸\",\n      enabled: selectedLocation.discovered && !selectedLocation.isBase && selectedLocation.owner !== \"player\",\n      action: () => attackLocation(selectedLocation)\n    }, {\n      label: \"Buy Back\",\n      icon: \"ðŸ’¸\",\n      enabled: selectedLocation.discovered && !selectedLocation.isBase && selectedLocation.owner !== \"player\" && resources.materials >= 50,\n      // Example cost for buying back\n      action: () => buyBackLocation(selectedLocation)\n    }, {\n      label: \"Explore\",\n      icon: \"ðŸ—ºï¸\",\n      enabled: true,\n      action: exploreNearby\n    }, {\n      label: \"Cancel\",\n      icon: \"âŒ\",\n      enabled: true,\n      action: () => setShowRadialMenu(false)\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50\",\n      onClick: () => setShowRadialMenu(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute\",\n        style: {\n          left: radialMenuPosition.x,\n          top: radialMenuPosition.y\n        },\n        children: actions.map((action, index) => {\n          const angle = (index * 120 - 60) * (Math.PI / 180);\n          const x = Math.cos(angle) * 100; // Increased radius for better spacing\n          const y = Math.sin(angle) * 100;\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !action.enabled,\n            onClick: e => {\n              e.stopPropagation();\n              action.action();\n            },\n            className: `absolute transform -translate-x-1/2 -translate-y-1/2 w-24 h-24 rounded-full flex flex-col items-center justify-center text-white text-sm font-bold uppercase transition-all duration-300 shadow-xl border-2 ${action.enabled ? \"bg-gradient-to-br from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 border-blue-500 hover:border-blue-300 transform hover:scale-110\" : \"bg-gray-700 border-gray-600 cursor-not-allowed opacity-60\"}\n                }`,\n            style: {\n              left: x,\n              top: y\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-3xl mb-1\",\n              children: action.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 936,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: action.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 937,\n              columnNumber: 17\n            }, this)]\n          }, action.label, true, {\n            fileName: _jsxFileName,\n            lineNumber: 923,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 913,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 909,\n      columnNumber: 7\n    }, this);\n  };\n  const DisasterPopup = () => {\n    if (!showDisaster) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative bg-gray-900 border border-red-700 rounded-xl p-8 max-w-sm shadow-2xl text-center transform scale-95 opacity-0 animate-fade-in-scale\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-3xl font-bold text-red-500 mb-4 drop-shadow-md\",\n          children: showDisaster.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 952,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-200 text-lg mb-6\",\n          children: showDisaster.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 955,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg text-gray-300 space-y-2 mb-6\",\n          children: Object.entries(showDisaster.effect).map(([resource, amount]) => /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex items-center justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"capitalize mr-2\",\n              children: [resource, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 959,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-white text-2xl\",\n              children: amount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 960,\n              columnNumber: 17\n            }, this)]\n          }, resource, true, {\n            fileName: _jsxFileName,\n            lineNumber: 958,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 956,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowDisaster(null),\n          className: \"w-full px-6 py-3 rounded-lg text-lg font-bold uppercase tracking-wider transition-all duration-300 transform hover:scale-105 shadow-md bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 text-white\",\n          children: \"Continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 964,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 951,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 950,\n      columnNumber: 7\n    }, this);\n  };\n  const AttackResultPopup = () => {\n    if (!showAttackResult) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 rounded-lg p-6 max-w-sm shadow-2xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-white mb-2\",\n          children: \"Attack Result\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 981,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-200 mb-4\",\n          children: showAttackResult.success ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Resources gained:\", \" \", Object.entries(showAttackResult.resourcesGained || {}).map(([resource, amount]) => `${amount} ${resource}`).join(\", \")]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Survivors lost: \", showAttackResult.survivorsLost]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 984,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowAttackResult(null),\n          className: \"w-full bg-green-700 hover:bg-green-800 text-white py-2 px-4 rounded transition-colors\",\n          children: \"Continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 998,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 980,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 979,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white\",\n    children: [isMobile ?\n    /*#__PURE__*/\n    // Mobile layout with tabs\n    _jsxDEV(\"div\", {\n      className: \"px-2 py-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-center mb-6\",\n        children: \"Wasteland Survivor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1014,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex mb-4 bg-gray-800 rounded-lg p-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"resources\"),\n          className: `flex-1 py-2 px-4 rounded-md transition-colors ${activeTab === \"resources\" ? \"bg-gray-700 text-white\" : \"text-gray-400 hover:text-white\"}`,\n          children: \"Resources\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1018,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"map\"),\n          className: `flex-1 py-2 px-4 rounded-md transition-colors ${activeTab === \"map\" ? \"bg-gray-700 text-white\" : \"text-gray-400 hover:text-white\"}`,\n          children: \"Map\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1028,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1017,\n        columnNumber: 11\n      }, this), activeTab === \"resources\" ? /*#__PURE__*/_jsxDEV(ResourcePanel, {\n        resources: resources,\n        upgrades: upgrades,\n        autoScavengeEnabled: autoScavengeEnabled,\n        purchaseUpgrade: purchaseUpgrade,\n        setAutoScavengeEnabled: setAutoScavengeEnabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1040,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(MapView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1048,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1013,\n      columnNumber: 9\n    }, this) :\n    /*#__PURE__*/\n    // Desktop split-screen layout\n    _jsxDEV(\"div\", {\n      className: \"flex h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/2 p-6 overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold mb-6\",\n          children: \"Wasteland Survivor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1055,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ResourcePanel, {\n          resources: resources,\n          upgrades: upgrades,\n          autoScavengeEnabled: autoScavengeEnabled,\n          purchaseUpgrade: purchaseUpgrade,\n          setAutoScavengeEnabled: setAutoScavengeEnabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1056,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1054,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/2 p-6 border-l border-gray-700 flex flex-col h-full\",\n        children: /*#__PURE__*/_jsxDEV(MapView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1065,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1064,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1053,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(RadialMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1070,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DisasterPopup, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1071,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ScavengePopup, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1072,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AttackResultPopup, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1073,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1010,\n    columnNumber: 5\n  }, this);\n};\n_s(ApocalypticGame, \"ok9328FjtdnchQpSsexJHof/UNw=\");\n_c = ApocalypticGame;\nexport default ApocalypticGame;\nvar _c;\n$RefreshReg$(_c, \"ApocalypticGame\");","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","SAVE_KEY","AUTO_SAVE_INTERVAL","DISASTER_CHANCE","initialResources","food","water","materials","survivors","disasters","id","name","description","effect","ApocalypticGame","_s","resources","setResources","activeTab","setActiveTab","isMobile","setIsMobile","showRadialMenu","setShowRadialMenu","radialMenuPosition","setRadialMenuPosition","x","y","selectedLocation","setSelectedLocation","showDisaster","setShowDisaster","autoScavengeEnabled","setAutoScavengeEnabled","scavengeResult","setScavengeResult","showAttackResult","setShowAttackResult","waitingForScavengePopup","setWaitingForScavengePopup","showTakeoverAnimation","setShowTakeoverAnimation","gameLoopRef","autoSaveRef","upgrades","setUpgrades","cost","level","maxLevel","GRID_SIZE","locationNames","generateInitialGrid","locations","isBase","Math","floor","push","discovered","scavengeTime","random","lastScavenged","owner","setLocations","resourcesRef","upgradesRef","current","checkMobile","window","innerWidth","addEventListener","removeEventListener","savedGame","localStorage","getItem","gameState","JSON","parse","timePassed","Date","now","lastSave","minutesPassed","offlineResources","forEach","upgrade","e","console","error","saveGame","setItem","stringify","setInterval","clearInterval","floorResources","res","isEqualResources","a","b","prev","newResources","max","floored","disaster","length","applyDisaster","checkAutoScavenge","interval","finished","find","loc","finalizeScavenge","hasActiveScavenge","updated","newLocations","map","loot","targetIndex","findIndex","Object","values","some","v","location","prevResources","wasScavenged","handleMapClick","stopPropagation","clientX","clientY","scavengeLocation","exploreNearby","getGridCoords","match","parseInt","selectedCoords","coords","dx","abs","dy","purchaseUpgrade","canAfford","entries","every","resource","u","fromEntries","r","c","getScavengeProgress","elapsed","min","attackLocation","success","materialsGained","locationName","resourcesGained","survivorsLost","buyBackLocation","amount","log","ResourcePanel","memo","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","join","type","checked","onChange","target","ScavengePopup","key","value","MapView","style","gridTemplateColumns","gridTemplateRows","isAnimatingTakeover","val","width","timer","setTimeout","clearTimeout","RadialMenu","actions","label","icon","enabled","action","left","top","index","angle","PI","cos","sin","DisasterPopup","AttackResultPopup","_c","$RefreshReg$"],"sources":["/Users/faybennett/outlierTasks/game-app/src/App.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\n\n// Types\ninterface Resources {\n  food: number;\n  water: number;\n  materials: number;\n  survivors: number;\n}\n\ninterface BaseUpgrade {\n  id: string;\n  name: string;\n  description: string;\n  cost: Partial<Resources>;\n  effect: string;\n  level: number;\n  maxLevel: number;\n}\n\ninterface MapLocation {\n  id: string;\n  name: string;\n  x: number;\n  y: number;\n  discovered: boolean;\n  scavengeTime: number;\n  lastScavenged: number | null;\n  resources: Partial<Resources>;\n  isBase?: boolean; // Optional property to mark the base location\n  wasScavenged?: boolean; // Optional property to track if the location was already scavenged\n  owner?: string | null; // New property to track ownership\n}\n\ninterface Disaster {\n  id: string;\n  name: string;\n  description: string;\n  effect: Partial<Resources>;\n}\n\ninterface GameState {\n  resources: Resources;\n  upgrades: BaseUpgrade[];\n  locations: MapLocation[];\n  lastSave: number;\n  autoScavengeEnabled: boolean;\n}\n\n// Constants\nconst SAVE_KEY = \"apocalypse-idle-save\";\nconst AUTO_SAVE_INTERVAL = 10000; // 10 seconds\nconst DISASTER_CHANCE = 0.002; // 0.2% chance per second\n\nconst initialResources: Resources = {\n  food: 100,\n  water: 100,\n  materials: 50,\n  survivors: 5,\n};\n\nconst disasters: Disaster[] = [\n  {\n    id: \"raiders\",\n    name: \"Raider Attack!\",\n    description: \"Raiders have attacked your base!\",\n    effect: { food: -20, water: -15, materials: -10 },\n  },\n  {\n    id: \"drought\",\n    name: \"Drought\",\n    description: \"Water supplies are running low!\",\n    effect: { water: -30 },\n  },\n  {\n    id: \"sickness\",\n    name: \"Disease Outbreak\",\n    description: \"A disease has spread through your camp!\",\n    effect: { survivors: -1, food: -10 },\n  },\n];\n\nconst ApocalypticGame: React.FC = () => {\n  // State\n  const [resources, setResources] = useState<Resources>(initialResources);\n  const [activeTab, setActiveTab] = useState<\"resources\" | \"map\">(\"resources\");\n  const [isMobile, setIsMobile] = useState(false);\n  const [showRadialMenu, setShowRadialMenu] = useState(false);\n  const [radialMenuPosition, setRadialMenuPosition] = useState({ x: 0, y: 0 });\n  const [selectedLocation, setSelectedLocation] = useState<MapLocation | null>(\n    null,\n  );\n  const [showDisaster, setShowDisaster] = useState<Disaster | null>(null);\n  const [autoScavengeEnabled, setAutoScavengeEnabled] = useState(true);\n\n  const [scavengeResult, setScavengeResult] =\n    useState<Partial<Resources> | null>(null);\n  const [showAttackResult, setShowAttackResult] = useState<{ success: boolean; locationName: string; resourcesGained?: Partial<Resources>; survivorsLost?: number } | null>(null);\n\n  const [waitingForScavengePopup, setWaitingForScavengePopup] = useState(false);\n  const [showTakeoverAnimation, setShowTakeoverAnimation] = useState<string | null>(null);\n\n  const gameLoopRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const autoSaveRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const [upgrades, setUpgrades] = useState<BaseUpgrade[]>([\n    {\n      id: \"farm\",\n      name: \"Makeshift Farm\",\n      description: \"Produces food over time\",\n      cost: { materials: 50 },\n      effect: \"+2 food/minute\",\n      level: 0,\n      maxLevel: 5,\n    },\n    {\n      id: \"well\",\n      name: \"Water Collector\",\n      description: \"Collects water from the atmosphere\",\n      cost: { materials: 40 },\n      effect: \"+1 water/minute\",\n      level: 0,\n      maxLevel: 5,\n    },\n    {\n      id: \"shelter\",\n      name: \"Survivor Shelter\",\n      description: \"Attracts new survivors\",\n      cost: { materials: 100, food: 50 },\n      effect: \"+1 survivor chance/hour\",\n      level: 0,\n      maxLevel: 3,\n    },\n  ]);\n\n  const GRID_SIZE = 5;\n\n  const locationNames = [\n    \"Dustfield\",\n    \"Ashrock\",\n    \"Ironpit\",\n    \"Deadwell\",\n    \"Cragpoint\",\n    \"Burnpass\",\n    \"Mudspire\",\n    \"Wretchend\",\n    \"Redhollow\",\n    \"Saltmoor\",\n    \"Scraptown\",\n    \"Charcliff\",\n    \"Dryreach\",\n    \"Ragbank\",\n    \"Blightden\",\n    \"Boneplain\",\n    \"Rustbarrow\",\n    \"Smokefall\",\n    \"Shivglen\",\n    \"Flintgorge\",\n    \"Gravefen\",\n    \"Scorchbay\",\n    \"Fogscar\",\n    \"Ruinstep\",\n    \"Crimsonlot\",\n  ];\n\n  const generateInitialGrid = (): MapLocation[] => {\n    const locations: MapLocation[] = [];\n\n    for (let y = 0; y < GRID_SIZE; y++) {\n      for (let x = 0; x < GRID_SIZE; x++) {\n        const isBase =\n          x === Math.floor(GRID_SIZE / 2) && y === Math.floor(GRID_SIZE / 2);\n\n        locations.push({\n          id: `cell-${x}-${y}`,\n          name: isBase\n            ? \"Your Base\"\n            : locationNames[y * GRID_SIZE + x] || `Sector-${x}-${y}`,\n          isBase: isBase,\n          x,\n          y,\n          discovered: isBase,\n          scavengeTime: isBase ? 0 : 5000 + Math.floor(Math.random() * 5000),\n          lastScavenged: null,\n          resources: isBase\n            ? {}\n            : Math.random() < 0.6 // change of having resoureces on newly discovered locations\n            ? {\n                food: Math.floor(Math.random() * 30),\n                water: Math.floor(Math.random() * 20),\n                materials:\n                  Math.random() < 0.5 ? Math.floor(Math.random() * 40) : 0,\n                survivors: Math.random() < 0.2 ? 1 : 0,\n              }\n            : {},\n          owner: isBase ? \"player\" : null, // Set owner for base and null for others\n        });\n      }\n    }\n\n    return locations;\n  };\n\n  const [locations, setLocations] = useState<MapLocation[]>(\n    generateInitialGrid(),\n  );\n\n  const resourcesRef = useRef(resources);\n  const upgradesRef = useRef(upgrades);\n\n  // Update refs whenever state changes\n  useEffect(() => {\n    resourcesRef.current = resources;\n  }, [resources]);\n  useEffect(() => {\n    upgradesRef.current = upgrades;\n  }, [upgrades]);\n\n  // Responsive design\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n    return () => window.removeEventListener(\"resize\", checkMobile);\n  }, []);\n\n  // Load game\n  useEffect(() => {\n    const savedGame = localStorage.getItem(SAVE_KEY);\n    if (savedGame) {\n      try {\n        const gameState: GameState = JSON.parse(savedGame);\n        const timePassed = Date.now() - gameState.lastSave;\n\n        // Calculate offline progression\n        const minutesPassed = timePassed / 60000;\n        const offlineResources = { ...gameState.resources };\n\n        gameState.upgrades.forEach((upgrade) => {\n          if (upgrade.id === \"farm\" && upgrade.level > 0) {\n            offlineResources.food += Math.floor(\n              minutesPassed * 2 * upgrade.level * 0.5,\n            ); // 50% efficiency offline\n          }\n          if (upgrade.id === \"well\" && upgrade.level > 0) {\n            offlineResources.water += Math.floor(\n              minutesPassed * 1 * upgrade.level * 0.5,\n            );\n          }\n          if (upgrade.id === \"shelter\" && upgrade.level > 0) {\n            offlineResources.survivors += Math.floor(\n              minutesPassed * (1 / 60) * upgrade.level * 0.5,\n            );\n          }\n        });\n\n        setResources(offlineResources);\n        setUpgrades(gameState.upgrades);\n        setLocations(gameState.locations);\n        setAutoScavengeEnabled(gameState.autoScavengeEnabled);\n      } catch (e) {\n        console.error(\"Failed to load save:\", e);\n      }\n    }\n  }, []);\n\n  // Save game\n  const saveGame = useCallback(() => {\n    const gameState: GameState = {\n      resources,\n      upgrades,\n      locations,\n      lastSave: Date.now(),\n      autoScavengeEnabled,\n    };\n    localStorage.setItem(SAVE_KEY, JSON.stringify(gameState));\n  }, [resources, upgrades, locations, autoScavengeEnabled]);\n\n  // Auto save\n  useEffect(() => {\n    autoSaveRef.current = setInterval(saveGame, AUTO_SAVE_INTERVAL);\n    return () => {\n      if (autoSaveRef.current) clearInterval(autoSaveRef.current);\n    };\n  }, [saveGame]);\n\n  function floorResources(res: Resources): Resources {\n    return {\n      food: Math.floor(res.food),\n      water: Math.floor(res.water),\n      materials: Math.floor(res.materials),\n      survivors: Math.floor(res.survivors),\n    };\n  }\n\n  function isEqualResources(a: Resources, b: Resources): boolean {\n    return (\n      a.food === b.food &&\n      a.water === b.water &&\n      a.materials === b.materials &&\n      a.survivors === b.survivors\n    );\n  }\n\n  // Game loop\n  useEffect(() => {\n    gameLoopRef.current = setInterval(() => {\n      setResources((prev) => {\n        const newResources = { ...prev };\n\n        // Apply upgrade effects\n        upgrades.forEach((upgrade) => {\n          if (upgrade.id === \"farm\" && upgrade.level > 0) {\n            newResources.food += (2 * upgrade.level) / 60; // per second\n          }\n          if (upgrade.id === \"well\" && upgrade.level > 0) {\n            newResources.water += (1 * upgrade.level) / 60;\n          }\n          if (upgrade.id === \"shelter\" && upgrade.level > 0) {\n            newResources.survivors += (1 * upgrade.level) / 3600; // 1 per hour\n          }\n        });\n\n        // Survivor consumption\n        newResources.food = Math.max(\n          0,\n          newResources.food - prev.survivors * 0.01,\n        );\n        newResources.water = Math.max(\n          0,\n          newResources.water - prev.survivors * 0.02,\n        );\n\n        // Floor and compare\n        const floored = floorResources(newResources);\n        if (!isEqualResources(floored, floorResources(prev))) {\n          return floored;\n        }\n        return prev; // Skip update if unchanged\n      });\n\n      // Check for disasters\n      if (Math.random() < DISASTER_CHANCE) {\n        const disaster =\n          disasters[Math.floor(Math.random() * disasters.length)];\n        setShowDisaster(disaster);\n        applyDisaster(disaster);\n      }\n\n      // Auto scavenging\n      if (autoScavengeEnabled) {\n        checkAutoScavenge();\n      }\n    }, 2000);\n\n    return () => {\n      if (gameLoopRef.current) clearInterval(gameLoopRef.current);\n    };\n  }, [upgrades, autoScavengeEnabled]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = Date.now();\n      if (waitingForScavengePopup || scavengeResult) return;\n\n      const finished = locations.find(\n        (loc) =>\n          loc.lastScavenged &&\n          loc.scavengeTime > 0 &&\n          now - loc.lastScavenged >= loc.scavengeTime,\n      );\n\n      if (finished) finalizeScavenge(finished);\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [locations, waitingForScavengePopup, scavengeResult]);\n\n  const applyDisaster = (disaster: Disaster) => {\n    setResources((prev) => ({\n      food: Math.max(0, prev.food + (disaster.effect.food || 0)),\n      water: Math.max(0, prev.water + (disaster.effect.water || 0)),\n      materials: Math.max(0, prev.materials + (disaster.effect.materials || 0)),\n      survivors: Math.max(1, prev.survivors + (disaster.effect.survivors || 0)),\n    }));\n  };\n\n  const checkAutoScavenge = () => {\n    if (waitingForScavengePopup) return;\n\n    const now = Date.now();\n\n    setLocations((prev) => {\n      let hasActiveScavenge = false;\n      let updated = false;\n\n      const newLocations = prev.map((loc) => {\n        if (loc.lastScavenged && loc.scavengeTime > 0) {\n          if (now - loc.lastScavenged >= loc.scavengeTime && !updated) {\n            const loot = {\n              food: loc.resources.food || 0,\n              water: loc.resources.water || 0,\n              materials: loc.resources.materials || 0,\n              survivors: loc.resources.survivors || 0,\n            };\n\n            finalizeScavenge(loc);\n            updated = true;\n            return loc;\n          }\n\n          hasActiveScavenge = true;\n          return loc;\n        }\n\n        return loc;\n      });\n\n      if (!hasActiveScavenge && !updated) {\n        // Start auto-scavenge on the first available location\n        const targetIndex = newLocations.findIndex(\n          (loc) =>\n            loc.discovered &&\n            !loc.lastScavenged &&\n            loc.scavengeTime > 0 &&\n            Object.values(loc.resources).some((v) => v && v > 0),\n        );\n\n        if (targetIndex !== -1) {\n          newLocations[targetIndex] = {\n            ...newLocations[targetIndex],\n            lastScavenged: now,\n          };\n          updated = true;\n        }\n      }\n\n      return newLocations;\n    });\n  };\n\n  const finalizeScavenge = (location: MapLocation) => {\n    const loot = {\n      food: location.resources.food || 0,\n      water: location.resources.water || 0,\n      materials: location.resources.materials || 0,\n      survivors: location.resources.survivors || 0,\n    };\n\n    setScavengeResult(loot);\n    setResources((prevResources) => ({\n      food: prevResources.food + loot.food,\n      water: prevResources.water + loot.water,\n      materials: prevResources.materials + loot.materials,\n      survivors: prevResources.survivors + loot.survivors,\n    }));\n    setWaitingForScavengePopup(true);\n\n    setLocations((prev) =>\n      prev.map((loc) =>\n        loc.id === location.id\n          ? { ...loc, lastScavenged: null, resources: {}, wasScavenged: true }\n          : loc,\n      ),\n    );\n  };\n\n  const handleMapClick = (\n    e: React.MouseEvent<HTMLDivElement>,\n    location: MapLocation,\n  ) => {\n    e.stopPropagation();\n    if (!location.discovered && location.id !== \"base\") return;\n\n    setSelectedLocation(location);\n    setRadialMenuPosition({ x: e.clientX, y: e.clientY });\n    setShowRadialMenu(true);\n  };\n\n  const scavengeLocation = (location: MapLocation) => {\n    if (location.lastScavenged || location.scavengeTime === 0) return;\n\n    setLocations((prev) =>\n      prev.map((loc) =>\n        loc.id === location.id ? { ...loc, lastScavenged: Date.now() } : loc,\n      ),\n    );\n    setShowRadialMenu(false);\n  };\n\n  const exploreNearby = () => {\n    if (!selectedLocation) return;\n\n    const getGridCoords = (id: string) => {\n      const match = id.match(/cell-(\\d+)-(\\d+)/);\n      if (!match) return null;\n      return { x: parseInt(match[1]), y: parseInt(match[2]) };\n    };\n\n    const selectedCoords = getGridCoords(selectedLocation.id);\n    if (!selectedCoords) return;\n\n    setLocations((prev) =>\n      prev.map((loc) => {\n        const coords = getGridCoords(loc.id);\n        if (!coords || loc.discovered) return loc;\n\n        const dx = Math.abs(coords.x - selectedCoords.x);\n        const dy = Math.abs(coords.y - selectedCoords.y);\n\n        if (dx <= 1 && dy <= 1) {\n          return { ...loc, discovered: true };\n        }\n\n        return loc;\n      }),\n    );\n\n    setShowRadialMenu(false);\n  };\n\n  const purchaseUpgrade = (upgrade: BaseUpgrade) => {\n    if (upgrade.level >= upgrade.maxLevel) return;\n\n    const canAfford = Object.entries(upgrade.cost).every(\n      ([resource, cost]) =>\n        resources[resource as keyof Resources] >= (cost || 0),\n    );\n\n    if (canAfford) {\n      setResources((prev) => {\n        const newResources = { ...prev };\n        Object.entries(upgrade.cost).forEach(([resource, cost]) => {\n          newResources[resource as keyof Resources] -= cost || 0;\n        });\n        return newResources;\n      });\n\n      setUpgrades((prev) =>\n        prev.map((u) =>\n          u.id === upgrade.id\n            ? {\n                ...u,\n                level: u.level + 1,\n                cost: Object.fromEntries(\n                  Object.entries(u.cost).map(([r, c]) => [\n                    r,\n                    Math.floor((c || 0) * 1.5),\n                  ]),\n                ),\n              }\n            : u,\n        ),\n      );\n    }\n  };\n\n  const getScavengeProgress = (location: MapLocation) => {\n    if (!location.lastScavenged || location.scavengeTime === 0) return 0;\n    const elapsed = Date.now() - location.lastScavenged;\n    return Math.min(100, (elapsed / location.scavengeTime) * 100);\n  };\n\n  const attackLocation = (location: MapLocation) => {\n    const success = Math.random() < 0.5; // 50% chance of success\n\n    if (success) {\n      const materialsGained = 20 + Math.floor(Math.random() * 30);\n      setResources((prev) => ({\n        ...prev,\n        materials: prev.materials + materialsGained,\n      }));\n      setLocations((prev) =>\n        prev.map((loc) =>\n          loc.id === location.id ? { ...loc, owner: \"player\" } : loc,\n        ),\n      );\n      setShowAttackResult({\n        success: true,\n        locationName: location.name,\n        resourcesGained: { materials: materialsGained },\n      });\n      setShowTakeoverAnimation(location.id); // Trigger takeover animation\n    } else {\n      const survivorsLost = 1; // Always lose 1 survivor on failure\n      setResources((prev) => ({\n        ...prev,\n        survivors: Math.max(0, prev.survivors - survivorsLost),\n      }));\n      setShowAttackResult({\n        success: false,\n        locationName: location.name,\n        survivorsLost: survivorsLost,\n      });\n    }\n    setShowRadialMenu(false);\n  };\n\n  const buyBackLocation = (location: MapLocation) => {\n    const cost = { materials: 50 }; // Example cost\n\n    const canAfford = Object.entries(cost).every(\n      ([resource, amount]) => resources[resource as keyof Resources] >= (amount || 0)\n    );\n\n    if (canAfford) {\n      setResources(prev => {\n        const newResources = { ...prev };\n        Object.entries(cost).forEach(([resource, amount]) => {\n          newResources[resource as keyof Resources] -= amount || 0;\n        });\n        return newResources;\n      });\n\n      setLocations(prev =>\n        prev.map(loc =>\n          loc.id === location.id ? { ...loc, owner: \"player\" } : loc\n        )\n      );\n      setShowTakeoverAnimation(location.id); // Trigger takeover animation\n      setShowRadialMenu(false);\n    } else {\n      // Optionally, add feedback for not being able to afford\n      console.log(\"Cannot afford to buy back this location.\");\n    }\n  };\n\n  // Components\n  const ResourcePanel = React.memo(\n    ({\n      resources,\n      upgrades,\n      autoScavengeEnabled,\n      purchaseUpgrade,\n      setAutoScavengeEnabled,\n    }: {\n      resources: Resources;\n      upgrades: BaseUpgrade[];\n      autoScavengeEnabled: boolean;\n      purchaseUpgrade: (upgrade: BaseUpgrade) => void;\n      setAutoScavengeEnabled: (enabled: boolean) => void;\n    }) => {\n      return (\n        <div className=\"relative bg-gray-900 border border-gray-700 rounded-xl p-8 shadow-2xl h-full flex flex-col overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-br before:from-gray-800 before:via-gray-900 before:to-black before:opacity-50 before:rounded-xl\">\n          <div className=\"relative z-10 flex-none\">\n            <h2 className=\"text-4xl font-extrabold text-white mb-8 text-center drop-shadow-md\">\n              Resources\n            </h2>\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-10\">\n              <div className=\"relative bg-gray-800 bg-opacity-70 backdrop-filter backdrop-blur-sm rounded-lg p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-700 flex flex-col items-center justify-center space-y-2\">\n                <span className=\"text-4xl\">ðŸ–</span>\n                <span className=\"text-lg font-bold text-gray-100\">Food</span>\n                <span className=\"text-3xl font-semibold text-green-400\">\n                  {Math.floor(resources.food)}\n                </span>\n              </div>\n              <div className=\"relative bg-gray-800 bg-opacity-70 backdrop-filter backdrop-blur-sm rounded-lg p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-700 flex flex-col items-center justify-center space-y-2\">\n                <span className=\"text-4xl\">ðŸ’§</span>\n                <span className=\"text-lg font-bold text-gray-100\">Water</span>\n                <span className=\"text-3xl font-semibold text-blue-400\">\n                  {Math.floor(resources.water)}\n                </span>\n              </div>\n              <div className=\"relative bg-gray-800 bg-opacity-70 backdrop-filter backdrop-blur-sm rounded-lg p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-700 flex flex-col items-center justify-center space-y-2\">\n                <span className=\"text-4xl\">ðŸ”§</span>\n                <span className=\"text-lg font-bold text-gray-100\">Materials</span>\n                <span className=\"text-3xl font-semibold text-orange-400\">\n                  {Math.floor(resources.materials)}\n                </span>\n              </div>\n              <div className=\"relative bg-gray-800 bg-opacity-70 backdrop-filter backdrop-blur-sm rounded-lg p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-700 flex flex-col items-center justify-center space-y-2\">\n                <span className=\"text-4xl\">ðŸ‘¥</span>\n                <span className=\"text-lg font-bold text-gray-100\">Survivors</span>\n                <span className=\"text-3xl font-semibold text-purple-400\">\n                  {resources.survivors}\n                </span>\n              </div>\n            </div>\n            <h3 className=\"text-3xl font-bold text-white mb-6 text-center drop-shadow-md\">\n              Base Upgrades\n            </h3>\n          </div>\n\n          <div className=\"relative z-10 flex-grow overflow-y-auto pr-4 -mr-4\">\n            <div className=\"space-y-4\">\n              {upgrades.map((upgrade) => {\n                const canAfford = Object.entries(upgrade.cost).every(\n                  ([resource, cost]) =>\n                    resources[resource as keyof Resources] >= (cost || 0),\n                );\n\n                return (\n                  <div\n                    key={upgrade.id}\n                    className=\"bg-gray-800 bg-opacity-60 backdrop-filter backdrop-blur-sm rounded-xl p-5 shadow-lg flex flex-col md:flex-row items-center gap-4 border border-gray-700 hover:shadow-xl transition-shadow\"\n                  >\n                    <div className=\"flex-grow text-center md:text-left\">\n                      <div className=\"flex flex-col md:flex-row items-center gap-2 mb-1\">\n                        <h4 className=\"text-xl font-semibold text-white\">\n                          {upgrade.name}\n                        </h4>\n                        <p className=\"text-sm text-green-300\">\n                          {upgrade.effect}\n                        </p>\n                      </div>\n                      <p className=\"text-sm text-gray-300 mb-2\">\n                        {upgrade.description}\n                      </p>\n                      <p className=\"text-md font-medium text-gray-200\">\n                        Level {upgrade.level}/{upgrade.maxLevel}\n                      </p>\n                    </div>\n                    {upgrade.level < upgrade.maxLevel && (\n                      <button\n                        onClick={() => purchaseUpgrade(upgrade)}\n                        disabled={!canAfford}\n                        className={`w-full md:w-auto px-6 py-3 rounded-lg text-lg font-bold uppercase tracking-wider transition-all duration-300 transform hover:scale-105 shadow-md ${\n                          canAfford\n                            ? \"bg-gradient-to-r from-green-600 to-green-800 hover:from-green-700 hover:to-green-900 text-white\"\n                            : \"bg-gray-600 text-gray-400 cursor-not-allowed opacity-70\"\n                        }`}\n                      >\n                        <p>Upgrade</p>\n                        <p className=\"text-xs mt-1 opacity-80\">\n                          (\n                          {Object.entries(upgrade.cost)\n                            .map(([r, c]) => `${c} ${r}`)\n                            .join(\", \")}\n                          )\n                        </p>\n                      </button>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          <div className=\"relative z-10 flex-none mt-8 pt-6 border-t border-gray-700\">\n            <label className=\"flex items-center justify-center space-x-3 text-gray-300 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={autoScavengeEnabled}\n                onChange={(e) => setAutoScavengeEnabled(e.target.checked)}\n                className=\"form-checkbox h-5 w-5 text-green-500 bg-gray-700 border-gray-600 rounded focus:ring-green-500\"\n              />\n              <span className=\"text-lg font-medium text-white\">Auto-scavenge locations</span>\n            </label>\n          </div>\n        </div>\n      );\n    },\n  );\n\n  const ScavengePopup = () => {\n    if (!scavengeResult) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4\">\n        <div className=\"relative bg-gray-900 border border-gray-700 rounded-xl p-8 max-w-sm shadow-2xl text-center transform scale-95 opacity-0 animate-fade-in-scale\">\n          <h3 className=\"text-3xl font-bold text-green-500 mb-4 drop-shadow-md\">\n            Resources Found!\n          </h3>\n          <ul className=\"text-gray-200 text-lg space-y-2 mb-6\">\n            {Object.entries(scavengeResult).map(([key, value]) =>\n              value > 0 ? (\n                <li key={key} className=\"flex items-center justify-center\">\n                  <span className=\"capitalize mr-2\">{key}:</span>\n                  <span className=\"font-semibold text-white text-2xl\">{value}</span>\n                </li>\n              ) : null,\n            )}\n          </ul>\n          <button\n            onClick={() => {\n              setScavengeResult(null);\n              setWaitingForScavengePopup(false); // Enables next scavenge\n            }}\n            className=\"w-full px-6 py-3 rounded-lg text-lg font-bold uppercase tracking-wider transition-all duration-300 transform hover:scale-105 shadow-md bg-gradient-to-r from-green-600 to-green-800 hover:from-green-700 hover:to-green-900 text-white\"\n          >\n            Continue\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const MapView = () => (\n    <div className=\"relative bg-gray-900 border border-gray-700 rounded-xl p-8 shadow-2xl h-full flex flex-col overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-br before:from-gray-800 before:via-gray-900 before:to-black before:opacity-50 before:rounded-xl\">\n      <h2 className=\"relative z-10 text-4xl font-extrabold text-white mb-8 text-center drop-shadow-md\">\n        Wasteland Map\n      </h2>\n      <div\n        className=\"relative z-10 grid bg-gray-950 border border-gray-700 rounded-lg aspect-square shadow-inner overflow-hidden\"\n        style={{\n          gridTemplateColumns: `repeat(${GRID_SIZE}, 1fr)`,\n          gridTemplateRows: `repeat(${GRID_SIZE}, 1fr)`,\n        }}\n        onClick={() => setShowRadialMenu(false)}\n      >\n        {locations.map((location) => {\n          const isAnimatingTakeover = showTakeoverAnimation === location.id;\n          return (\n            <div\n              key={location.id}\n              className={`relative flex items-center justify-center p-1 transition-all duration-300 group ${location.discovered ? \"cursor-pointer\" : \"opacity-30\"} ${isAnimatingTakeover ? 'animate-pulse-green' : ''}`}\n              onClick={(e) => handleMapClick(e, location)}\n            >\n              {location.discovered ? (\n                <div className=\"relative w-full h-full flex flex-col items-center justify-center text-center rounded-md overflow-hidden shadow-md group-hover:shadow-lg transition-shadow duration-300 border-2 border-transparent group-hover:border-blue-500\">\n                  <div\n                    className={`w-full h-full flex items-center justify-center text-4xl transform transition-all duration-300 group-hover:scale-105 ${location.isBase || location.owner === \"player\" ? \"bg-green-700\" : \"bg-blue-700\"}`}\n                  >\n                    {location.isBase\n                      ? \"ðŸ \"\n                      : location.owner === \"player\"\n                      ? \"âœ…\" // Owned by player, show checkmark or similar\n                      : location.resources &&\n                        Object.values(location.resources).some(\n                          (val) => val && val > 0,\n                        )\n                      ? \"ðŸ’°\"\n                      : \"\"}\n                  </div>\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-gray-800 bg-opacity-80 p-1 text-center backdrop-blur-sm group-hover:bg-opacity-90 transition-opacity\">\n                    <p className=\"text-xs font-semibold text-gray-200 truncate\">\n                      {location.name}\n                    </p>\n                  </div>\n                  {location.lastScavenged && location.scavengeTime > 0 && (\n                    <div className=\"absolute top-0 left-0 right-0 h-1 bg-gray-700 rounded-t\">\n                      <div\n                        className=\"h-full bg-yellow-500 rounded-t transition-all duration-1000\"\n                        style={{ width: `${getScavengeProgress(location)}%` }}\n                      />\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"w-full h-full rounded-md bg-gray-800 flex items-center justify-center text-4xl opacity-50 animate-pulse border border-gray-700\"></div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n\n  useEffect(() => {\n    if (showTakeoverAnimation) {\n      const timer = setTimeout(() => {\n        setShowTakeoverAnimation(null);\n      }, 1500); // Animation duration\n      return () => clearTimeout(timer);\n    }\n  }, [showTakeoverAnimation]);\n\n  const RadialMenu = () => {\n    if (!showRadialMenu || !selectedLocation) return null;\n\n    const actions = [\n      {\n        label: \"Scavenge\",\n        icon: \"ðŸ”\",\n        enabled:\n          !selectedLocation.lastScavenged &&\n          selectedLocation.scavengeTime > 0 &&\n          Object.values(selectedLocation.resources).some(\n            (val) => val && val > 0,\n          ),\n        action: () => scavengeLocation(selectedLocation),\n      },\n      {\n        label: \"Attack\",\n        icon: \"âš”ï¸\",\n        enabled: \n          selectedLocation.discovered && \n          !selectedLocation.isBase &&\n          selectedLocation.owner !== \"player\",\n        action: () => attackLocation(selectedLocation),\n      },\n      {\n        label: \"Buy Back\",\n        icon: \"ðŸ’¸\",\n        enabled:\n          selectedLocation.discovered &&\n          !selectedLocation.isBase &&\n          selectedLocation.owner !== \"player\" &&\n          resources.materials >= 50, // Example cost for buying back\n        action: () => buyBackLocation(selectedLocation),\n      },\n      {\n        label: \"Explore\",\n        icon: \"ðŸ—ºï¸\",\n        enabled: true,\n        action: exploreNearby,\n      },\n      {\n        label: \"Cancel\",\n        icon: \"âŒ\",\n        enabled: true,\n        action: () => setShowRadialMenu(false),\n      },\n    ];\n\n    return (\n      <div\n        className=\"fixed inset-0 z-50\"\n        onClick={() => setShowRadialMenu(false)}\n      >\n        <div\n          className=\"absolute\"\n          style={{ left: radialMenuPosition.x, top: radialMenuPosition.y }}\n        >\n          {actions.map((action, index) => {\n            const angle = (index * 120 - 60) * (Math.PI / 180);\n            const x = Math.cos(angle) * 100; // Increased radius for better spacing\n            const y = Math.sin(angle) * 100;\n\n            return (\n              <button\n                key={action.label}\n                disabled={!action.enabled}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  action.action();\n                }}\n                className={`absolute transform -translate-x-1/2 -translate-y-1/2 w-24 h-24 rounded-full flex flex-col items-center justify-center text-white text-sm font-bold uppercase transition-all duration-300 shadow-xl border-2 ${action.enabled\n                  ? \"bg-gradient-to-br from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 border-blue-500 hover:border-blue-300 transform hover:scale-110\"\n                  : \"bg-gray-700 border-gray-600 cursor-not-allowed opacity-60\"}\n                }`}\n                style={{ left: x, top: y }}\n              >\n                <span className=\"text-3xl mb-1\">{action.icon}</span>\n                <span>{action.label}</span>\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const DisasterPopup = () => {\n    if (!showDisaster) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4\">\n        <div className=\"relative bg-gray-900 border border-red-700 rounded-xl p-8 max-w-sm shadow-2xl text-center transform scale-95 opacity-0 animate-fade-in-scale\">\n          <h3 className=\"text-3xl font-bold text-red-500 mb-4 drop-shadow-md\">\n            {showDisaster.name}\n          </h3>\n          <p className=\"text-gray-200 text-lg mb-6\">{showDisaster.description}</p>\n          <div className=\"text-lg text-gray-300 space-y-2 mb-6\">\n            {Object.entries(showDisaster.effect).map(([resource, amount]) => (\n              <p key={resource} className=\"flex items-center justify-center\">\n                <span className=\"capitalize mr-2\">{resource}:</span>\n                <span className=\"font-semibold text-white text-2xl\">{amount}</span>\n              </p>\n            ))}\n          </div>\n          <button\n            onClick={() => setShowDisaster(null)}\n            className=\"w-full px-6 py-3 rounded-lg text-lg font-bold uppercase tracking-wider transition-all duration-300 transform hover:scale-105 shadow-md bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 text-white\"\n          >\n            Continue\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const AttackResultPopup = () => {\n    if (!showAttackResult) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n        <div className=\"bg-gray-800 rounded-lg p-6 max-w-sm shadow-2xl\">\n          <h3 className=\"text-xl font-bold text-white mb-2\">\n            Attack Result\n          </h3>\n          <p className=\"text-gray-200 mb-4\">\n            {showAttackResult.success ? (\n              <>\n                Resources gained:{\" \"}\n                {Object.entries(showAttackResult.resourcesGained || {})\n                  .map(([resource, amount]) => `${amount} ${resource}`)\n                  .join(\", \")}\n              </>\n            ) : (\n              <>\n                Survivors lost: {showAttackResult.survivorsLost}\n              </>\n            )}\n          </p>\n          <button\n            onClick={() => setShowAttackResult(null)}\n            className=\"w-full bg-green-700 hover:bg-green-800 text-white py-2 px-4 rounded transition-colors\"\n          >\n            Continue\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white\">\n      {isMobile ? (\n        // Mobile layout with tabs\n        <div className=\"px-2 py-4\">\n          <h1 className=\"text-3xl font-bold text-center mb-6\">\n            Wasteland Survivor\n          </h1>\n          <div className=\"flex mb-4 bg-gray-800 rounded-lg p-1\">\n            <button\n              onClick={() => setActiveTab(\"resources\")}\n              className={`flex-1 py-2 px-4 rounded-md transition-colors ${\n                activeTab === \"resources\"\n                  ? \"bg-gray-700 text-white\"\n                  : \"text-gray-400 hover:text-white\"\n              }`}\n            >\n              Resources\n            </button>\n            <button\n              onClick={() => setActiveTab(\"map\")}\n              className={`flex-1 py-2 px-4 rounded-md transition-colors ${\n                activeTab === \"map\"\n                  ? \"bg-gray-700 text-white\"\n                  : \"text-gray-400 hover:text-white\"\n              }`}\n            >\n              Map\n            </button>\n          </div>\n          {activeTab === \"resources\" ? (\n            <ResourcePanel\n              resources={resources}\n              upgrades={upgrades}\n              autoScavengeEnabled={autoScavengeEnabled}\n              purchaseUpgrade={purchaseUpgrade}\n              setAutoScavengeEnabled={setAutoScavengeEnabled}\n            />\n          ) : (\n            <MapView />\n          )}\n        </div>\n      ) : (\n        // Desktop split-screen layout\n        <div className=\"flex h-screen\">\n          <div className=\"w-1/2 p-6 overflow-y-auto\">\n            <h1 className=\"text-3xl font-bold mb-6\">Wasteland Survivor</h1>\n            <ResourcePanel\n              resources={resources}\n              upgrades={upgrades}\n              autoScavengeEnabled={autoScavengeEnabled}\n              purchaseUpgrade={purchaseUpgrade}\n              setAutoScavengeEnabled={setAutoScavengeEnabled}\n            />\n          </div>\n          <div className=\"w-1/2 p-6 border-l border-gray-700 flex flex-col h-full\">\n            <MapView />\n          </div>\n        </div>\n      )}\n\n      <RadialMenu />\n      <DisasterPopup />\n      <ScavengePopup />\n      <AttackResultPopup />\n    </div>\n  );\n};\n\nexport default ApocalypticGame;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}